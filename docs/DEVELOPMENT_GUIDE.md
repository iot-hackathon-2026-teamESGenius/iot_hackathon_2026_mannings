
# Mannings SLA ä¼˜åŒ–ç³»ç»Ÿ - å®Œæ•´å¼€å‘æŒ‡å—

## é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®ç®€ä»‹
**Mannings SLA ä¼˜åŒ–ç³»ç»Ÿ**æ˜¯ä¸º DFI Retail Group - Mannings å¼€å‘çš„ç«¯åˆ°ç«¯é—¨åº—å–è´§æœåŠ¡ç­‰çº§åè®®ï¼ˆService Level Agreementï¼‰ä¼˜åŒ–è§£å†³æ–¹æ¡ˆã€‚ç³»ç»Ÿé€šè¿‡é›†æˆ AI/ML é¢„æµ‹æ¨¡å‹å’Œè¿ç­¹ä¼˜åŒ–ç®—æ³•ï¼Œæå‡é¡¾å®¢å–è´§ä½“éªŒå¹¶æ§åˆ¶è¿è¥æ€»æˆæœ¬ã€‚

### æ ¸å¿ƒç›®æ ‡
- ğŸ“ˆ **æå‡ SLA è¾¾æˆç‡**ï¼šä»é¢„æµ‹çš„ 85% æå‡è‡³ 95%
- â±ï¸ **ç¼©çŸ­å–è´§æ—¶é—´**ï¼šå¹³å‡å–è´§æ—¶é—´å‡å°‘ 15%
- ğŸ’° **ä¼˜åŒ–è¿è¥æˆæœ¬**ï¼šè¿è¾“æˆæœ¬é™ä½ 20%
- ğŸ” **å¢å¼ºå†³ç­–é€æ˜åº¦**ï¼šæä¾›å®æ—¶å¯è§†åŒ–å’Œé¢„æµ‹åˆ†æ

### æŠ€æœ¯æ¶æ„ç‰¹ç‚¹
- ğŸ”Œ **å¯æ’æ‹”æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¯ä¸ªåŠŸèƒ½æ¨¡å—å¯ç‹¬ç«‹å¼€å‘å’Œæ›¿æ¢
- ğŸ“¦ **æ¥å£é©±åŠ¨å¼€å‘**ï¼šæ ‡å‡†åŒ–æ¥å£ç¡®ä¿æ¨¡å—å…¼å®¹æ€§
- âš™ï¸ **é…ç½®é©±åŠ¨éƒ¨ç½²**ï¼šé€šè¿‡é…ç½®æ–‡ä»¶åˆ‡æ¢ä¸åŒå®ç°
- ğŸ”„ **äº‹ä»¶é©±åŠ¨æ¶æ„**ï¼šæ”¯æŒå®æ—¶æ•°æ®å¤„ç†å’Œå“åº”
- ğŸ§ª **å…¨é¢æµ‹è¯•è¦†ç›–**ï¼šå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•

---

## ç›®å½•
1. [å¼€å‘ç¯å¢ƒè®¾ç½®](#å¼€å‘ç¯å¢ƒè®¾ç½®)
2. [é¡¹ç›®ç»“æ„è¯´æ˜](#é¡¹ç›®ç»“æ„è¯´æ˜)
3. [æ¨¡å—åŒ–æ¶æ„è¯¦è§£](#æ¨¡å—åŒ–æ¶æ„è¯¦è§£)
4. [æ ¸å¿ƒæ¥å£è§„èŒƒ](#æ ¸å¿ƒæ¥å£è§„èŒƒ)
5. [æ¨¡å—å¼€å‘æŒ‡å—](#æ¨¡å—å¼€å‘æŒ‡å—)
6. [æ•°æ®ç®¡ç†ç­–ç•¥](#æ•°æ®ç®¡ç†ç­–ç•¥)
7. [æµ‹è¯•ç­–ç•¥](#æµ‹è¯•ç­–ç•¥)
8. [ä»£ç è´¨é‡ä¸è§„èŒƒ](#ä»£ç è´¨é‡ä¸è§„èŒƒ)
9. [åä½œå¼€å‘æµç¨‹](#åä½œå¼€å‘æµç¨‹)
10. [éƒ¨ç½²ä¸è¿ç»´](#éƒ¨ç½²ä¸è¿ç»´)
11. [æ•…éšœæ’æŸ¥](#æ•…éšœæ’æŸ¥)
12. [é™„å½•](#é™„å½•)

---

## å¼€å‘ç¯å¢ƒè®¾ç½®

### ç³»ç»Ÿè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**ï¼šUbuntu 20.04+/macOS 10.15+/Windows 10+ï¼ˆæ¨è Ubuntuï¼‰
- **Python ç‰ˆæœ¬**ï¼š3.9.xï¼ˆæ¨è 3.9.16ï¼‰
- **å†…å­˜**ï¼šæœ€ä½ 8GBï¼Œæ¨è 16GB
- **å­˜å‚¨**ï¼šæœ€ä½ 10GB å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**ï¼šç¨³å®šçš„äº’è”ç½‘è¿æ¥ï¼ˆç”¨äº API è°ƒç”¨ï¼‰

### å¿«é€Ÿè®¾ç½®ï¼ˆ5åˆ†é’Ÿå®Œæˆï¼‰

#### æ–¹æ³•ä¸€ï¼šä½¿ç”¨è‡ªåŠ¨è®¾ç½®è„šæœ¬ï¼ˆæ¨èï¼‰
```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/iot-hackathon-2026-teamESGenius/iot_hackathon_2026_mannings.git
cd iot_hackathon_2026_mannings

# 2. è¿è¡Œè‡ªåŠ¨è®¾ç½®è„šæœ¬
bash scripts/setup_conda_environment.sh

# 3. æ¿€æ´»ç¯å¢ƒ
conda activate mannings-sla

# 4. éªŒè¯ç¯å¢ƒ
python scripts/verify_environment.py
```

#### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨è®¾ç½®
```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/iot-hackathon-2026-teamESGenius/iot_hackathon_2026_mannings.git
cd iot_hackathon_2026_mannings

# 2. å®‰è£… Minicondaï¼ˆå¦‚æœªå®‰è£…ï¼‰
wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
bash Miniconda3-latest-Linux-x86_64.sh -b -p $HOME/miniconda
export PATH="$HOME/miniconda/bin:$PATH"

# 3. åˆ›å»º Conda ç¯å¢ƒ
conda env create -f environment.yml
conda activate mannings-sla

# 4. éªŒè¯ç¯å¢ƒ
python scripts/verify_environment.py
```

### å¯åŠ¨æœåŠ¡

ç¯å¢ƒé…ç½®å®Œæˆåï¼Œå¯ä»¥å¯åŠ¨ä»¥ä¸‹æœåŠ¡ï¼š

#### REST APIæœåŠ¡ï¼ˆå‰ç«¯è°ƒç”¨ï¼‰
```bash
uvicorn src.api.main:app --host 0.0.0.0 --port 8000 --reload
```
- **APIæ–‡æ¡£**ï¼šhttp://localhost:8000/docs
- **å¥åº·æ£€æŸ¥**ï¼šhttp://localhost:8000/health

#### Streamlitå¯è§†åŒ–çœ‹æ¿ï¼ˆå†…éƒ¨è°ƒè¯•ï¼‰
```bash
streamlit run src/visualization/dashboard/app.py
```
- **è®¿é—®åœ°å€**ï¼šhttp://localhost:8501

#### è·¯å¾„ä¼˜åŒ–Demo
```bash
python -m src.modules.routing.implementations.demo
```

### ç¯å¢ƒå˜é‡é…ç½®
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š
GOOGLE_MAPS_API_KEY=your_google_maps_api_key_here
HKO_API_KEY=your_hong_kong_observatory_api_key_here
LOG_LEVEL=INFO
DEBUG=False
```

### IDE é…ç½®
#### VS Code æ¨èé…ç½®
1. å®‰è£…ä»¥ä¸‹æ‰©å±•ï¼š
   - Python (Microsoft)
   - Pylance
   - Black Formatter
   - Python Test Explorer
   - GitLens

2. å·¥ä½œåŒºè®¾ç½®ï¼ˆ`.vscode/settings.json`ï¼‰ï¼š
```json
{
    "python.defaultInterpreterPath": "${workspaceFolder}/envs/mannings-sla/bin/python",
    "python.linting.enabled": true,
    "python.linting.flake8Enabled": true,
    "python.formatting.provider": "black",
    "python.formatting.blackArgs": ["--line-length", "88"],
    "python.testing.pytestEnabled": true,
    "python.testing.unittestEnabled": false,
    "editor.formatOnSave": true,
    "editor.codeActionsOnSave": {
        "source.organizeImports": true
    },
    "files.exclude": {
        "**/__pycache__": true,
        "**/*.pyc": true,
        "**/.pytest_cache": true
    }
}
```

#### PyCharm é…ç½®
1. é¡¹ç›®è§£é‡Šå™¨ï¼šé€‰æ‹© Conda ç¯å¢ƒ `mannings-sla`
2. å¯ç”¨ Black ä»£ç æ ¼å¼åŒ–
3. é…ç½® pytest ä¸ºæµ‹è¯•è¿è¡Œå™¨
4. å¯ç”¨ç±»å‹æç¤ºæ£€æŸ¥

---

## é¡¹ç›®ç»“æ„è¯´æ˜

```
iot_hackathon_2026_mannings/
â”œâ”€â”€ config/                    # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ modules.yaml          # æ¨¡å—æ³¨å†Œé…ç½®
â”‚   â”œâ”€â”€ agents.yaml           # æ™ºèƒ½ä½“é…ç½® (Stage 2)
â”‚   â”œâ”€â”€ environment.yaml      # ç¯å¢ƒé…ç½®
â”‚   â””â”€â”€ pipelines/            # æµæ°´çº¿é…ç½®
â”‚       â””â”€â”€ daily_optimization.yaml
â”œâ”€â”€ src/                      # æºä»£ç 
â”‚   â”œâ”€â”€ core/                 # æ ¸å¿ƒæ¡†æ¶
â”‚   â”‚   â”œâ”€â”€ interfaces.py     # æ‰€æœ‰æ¨¡å—æ¥å£å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ module_registry.py  # æ¨¡å—æ³¨å†Œè¡¨
â”‚   â”‚   â”œâ”€â”€ orchestrator.py   # æµæ°´çº¿åè°ƒå™¨
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ api/                  # REST APIæœåŠ¡å±‚ (æ–°å¢)
â”‚   â”‚   â”œâ”€â”€ main.py           # FastAPIå…¥å£
â”‚   â”‚   â””â”€â”€ routers/          # APIè·¯ç”±
â”‚   â”‚       â”œâ”€â”€ auth.py       # è®¤è¯æœåŠ¡
â”‚   â”‚       â”œâ”€â”€ dashboard.py  # æ•°æ®çœ‹æ¿
â”‚   â”‚       â”œâ”€â”€ forecast.py   # é¢„æµ‹æœåŠ¡
â”‚   â”‚       â”œâ”€â”€ planning.py   # å†³ç­–è§„åˆ’
â”‚   â”‚       â””â”€â”€ sla.py        # SLAæœåŠ¡
â”‚   â”œâ”€â”€ agents/               # æ™ºèƒ½ä½“æ¥å£ (Stage 2é¢„ç•™)
â”‚   â”‚   â”œâ”€â”€ interfaces.py     # Agentæ¥å£å®šä¹‰
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ modules/              # å¯æ’æ‹”æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ data/            # æ•°æ®è·å–æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ interfaces.py
â”‚   â”‚   â”‚   â””â”€â”€ implementations/
â”‚   â”‚   â”‚       â””â”€â”€ simulated_data_fetcher.py
â”‚   â”‚   â”œâ”€â”€ distance/        # è·ç¦»è®¡ç®—æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ interfaces.py
â”‚   â”‚   â”‚   â””â”€â”€ implementations/
â”‚   â”‚   â”‚       â”œâ”€â”€ euclidean_calculator.py
â”‚   â”‚   â”‚       â””â”€â”€ google_distance_matrix.py
â”‚   â”‚   â”œâ”€â”€ forecasting/     # é¢„æµ‹æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ inventory/       # åº“å­˜ä¼˜åŒ–æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ routing/         # è·¯å¾„ä¼˜åŒ–æ¨¡å— â­
â”‚   â”‚   â”‚   â”œâ”€â”€ interfaces.py
â”‚   â”‚   â”‚   â””â”€â”€ implementations/
â”‚   â”‚   â”‚       â”œâ”€â”€ ortools_optimizer.py      # Baseline CVRPTW
â”‚   â”‚   â”‚       â”œâ”€â”€ robust_optimizer.py       # é²æ£’ä¼˜åŒ–å™¨ (åˆ›æ–°ç‚¹)
â”‚   â”‚   â”‚       â”œâ”€â”€ scenario_generator.py     # æƒ…æ™¯ç”Ÿæˆå™¨
â”‚   â”‚   â”‚       â””â”€â”€ demo.py                   # Demoè„šæœ¬
â”‚   â”‚   â”œâ”€â”€ sla/             # SLAé¢„æµ‹æ¨¡å—
â”‚   â”‚   â””â”€â”€ visualization/   # å¯è§†åŒ–æ¨¡å—
â”‚   â”œâ”€â”€ main.py              # ä¸»åº”ç”¨å…¥å£
â”‚   â””â”€â”€ visualization/dashboard/  # Streamlitä»ªè¡¨æ¿
â”‚       â””â”€â”€ app.py
â”œâ”€â”€ tests/                    # æµ‹è¯•ä»£ç 
â”‚   â”œâ”€â”€ core/                # æ ¸å¿ƒæ¡†æ¶æµ‹è¯•
â”‚   â”œâ”€â”€ modules/             # æ¨¡å—æµ‹è¯•
â”‚   â””â”€â”€ integration/         # é›†æˆæµ‹è¯•
â”œâ”€â”€ data/                    # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ official/           # å®˜æ–¹æ•°æ®
â”‚   â”œâ”€â”€ synthetic/          # æ¨¡æ‹Ÿæ•°æ®
â”‚   â”œâ”€â”€ processed/          # å¤„ç†åçš„æ•°æ®
â”‚   â”œâ”€â”€ external/           # å¤–éƒ¨æ•°æ®
â”‚   â””â”€â”€ routing/            # è·¯å¾„ä¼˜åŒ–æ•°æ® (æ–°å¢)
â”‚       â””â”€â”€ forecast_input/  # é¢„æµ‹è¾“å…¥æ¥å£
â”œâ”€â”€ outputs/                 # è¾“å‡ºç›®å½•
â”‚   â”œâ”€â”€ models/             # æ¨¡å‹è¾“å‡º
â”‚   â”œâ”€â”€ reports/            # æŠ¥å‘Šè¾“å‡º
â”‚   â””â”€â”€ visualizations/     # å¯è§†åŒ–è¾“å‡º
â”œâ”€â”€ docs/                    # æ–‡æ¡£
â”œâ”€â”€ notebooks/              # Jupyter Notebooks
â”œâ”€â”€ scripts/                # å·¥å…·è„šæœ¬
â”œâ”€â”€ logs/                   # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ environment.yml         # Condaç¯å¢ƒé…ç½®
â”œâ”€â”€ requirements.txt        # Pythonä¾èµ–
â”œâ”€â”€ requirements-dev.txt    # å¼€å‘ä¾èµ–
â”œâ”€â”€ Dockerfile             # Dockeré…ç½®
â”œâ”€â”€ docker-compose.yml     # Docker Composeé…ç½®
â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜
```

### å…³é”®ç›®å½•è¯´æ˜

#### 1. `src/core/` - æ ¸å¿ƒæ¡†æ¶
- `interfaces.py`ï¼šå®šä¹‰æ‰€æœ‰æ¨¡å—å¿…é¡»å®ç°çš„æ¥å£
- `module_registry.py`ï¼šåŠ¨æ€æ¨¡å—åŠ è½½å’Œæ³¨å†Œç³»ç»Ÿ
- `orchestrator.py`ï¼šåè°ƒå„ä¸ªæ¨¡å—æ‰§è¡Œå·¥ä½œæµ

#### 2. `src/api/` - REST APIæœåŠ¡å±‚ (æ–°å¢)
ä¸ºå‰ç«¯(Vue3+uniapp)æä¾›HTTPæ¥å£ï¼š
- `main.py`ï¼šFastAPIåº”ç”¨å…¥å£
- `routers/auth.py`ï¼šè®¤è¯æœåŠ¡ï¼ˆç™»å½•/TokenéªŒè¯ï¼‰
- `routers/dashboard.py`ï¼šKPIæ•°æ®çœ‹æ¿
- `routers/forecast.py`ï¼šéœ€æ±‚é¢„æµ‹æœåŠ¡
- `routers/planning.py`ï¼šè¡¥è´§è®¡åˆ’/è½¦é˜Ÿè°ƒåº¦
- `routers/sla.py`ï¼šSLAé¢„è­¦æœåŠ¡

#### 3. `src/agents/` - æ™ºèƒ½ä½“æ¥å£ (Stage 2é¢„ç•™)
ç¬¬äºŒé˜¶æ®µAI Agentå¼€å‘æ¥å£ï¼š
- `IDemandForecastAgent`ï¼šéœ€æ±‚é¢„æµ‹æ™ºèƒ½ä½“
- `IInventoryOptimizationAgent`ï¼šåº“å­˜ä¼˜åŒ–æ™ºèƒ½ä½“
- `IRoutingDispatchAgent`ï¼šè·¯å¾„è°ƒåº¦æ™ºèƒ½ä½“
- `ISLAAlertAgent`ï¼šSLAé¢„è­¦æ™ºèƒ½ä½“
- `IMultiAgentCoordinator`ï¼šå¤šAgentåè°ƒå™¨

#### 4. `src/modules/` - å¯æ’æ‹”æ¨¡å—
æ¯ä¸ªæ¨¡å—åŒ…å«ï¼š
- `interfaces.py`ï¼šæ¨¡å—ç‰¹å®šçš„æ¥å£å®šä¹‰ï¼ˆç»§æ‰¿æ ¸å¿ƒæ¥å£ï¼‰
- `implementations/`ï¼šå…·ä½“å®ç°ç±»
- `__init__.py`ï¼šæ¨¡å—å¯¼å‡º

#### 5. `src/modules/routing/` - è·¯å¾„ä¼˜åŒ–æ¨¡å— â­
åŒ…å«é²æ£’ä¼˜åŒ–ç®—æ³•ï¼ˆé¡¹ç›®åˆ›æ–°ç‚¹ï¼‰ï¼š
- `ortools_optimizer.py`ï¼šBaseline CVRPTWå®ç°
- `robust_optimizer.py`ï¼šåŸºäºå¤šæƒ…æ™¯çš„é²æ£’ä¼˜åŒ–
- `scenario_generator.py`ï¼šä»é¢„æµ‹ç»“æœç”Ÿæˆéœ€æ±‚æƒ…æ™¯

#### 6. `config/` - é…ç½®ç®¡ç†
- `modules.yaml`ï¼šå®šä¹‰å¯ç”¨æ¨¡å—åŠå…¶é…ç½®
- `agents.yaml`ï¼šæ™ºèƒ½ä½“ç³»ç»Ÿé…ç½® (Stage 2)
- `environment.yaml`ï¼šç³»ç»Ÿçº§é…ç½®å‚æ•°
- `pipelines/`ï¼šé¢„å®šä¹‰çš„å·¥ä½œæµé…ç½®

#### 7. `tests/` - æµ‹è¯•ä»£ç 
- éµå¾ªä¸ `src/` ç›¸åŒçš„ç›®å½•ç»“æ„
- æ¯ä¸ªæ¨¡å—éƒ½æœ‰å¯¹åº”çš„æµ‹è¯•ç›®å½•
- åŒ…å«å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•

---

## æ¨¡å—åŒ–æ¶æ„è¯¦è§£

### æ¶æ„è®¾è®¡åŸåˆ™

#### 1. å•ä¸€èŒè´£åŸåˆ™
æ¯ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€ä¸ªç‰¹å®šçš„åŠŸèƒ½åŸŸï¼š
- **æ•°æ®è·å–æ¨¡å—**ï¼šä»å„ç§æ•°æ®æºè·å–æ•°æ®
- **è·ç¦»è®¡ç®—æ¨¡å—**ï¼šè®¡ç®—ä½ç½®ä¹‹é—´çš„è·ç¦»å’Œæ—¶é—´
- **é¢„æµ‹æ¨¡å—**ï¼šè¿›è¡Œéœ€æ±‚å’Œæ—¶é—´é¢„æµ‹
- **ä¼˜åŒ–æ¨¡å—**ï¼šè§£å†³å„ç§ä¼˜åŒ–é—®é¢˜
- **å¯è§†åŒ–æ¨¡å—**ï¼šå±•ç¤ºæ•°æ®å’Œç»“æœ

#### 2. æ¥å£éš”ç¦»åŸåˆ™
æ¨¡å—é—´é€šè¿‡æ ‡å‡†åŒ–çš„æ¥å£é€šä¿¡ï¼Œä¸ç›´æ¥ä¾èµ–å…·ä½“å®ç°ï¼š
```python
# ç¤ºä¾‹ï¼šè·ç¦»è®¡ç®—å™¨æ¥å£
class IDistanceCalculator(ABC):
    @abstractmethod
    def calculate_distance_matrix(self, origins, destinations, mode="driving"):
        pass
    
    @abstractmethod
    def get_provider_name(self):
        pass
```

#### 3. ä¾èµ–åè½¬åŸåˆ™
é«˜å±‚æ¨¡å—ä¸ä¾èµ–ä½å±‚æ¨¡å—ï¼Œéƒ½ä¾èµ–æŠ½è±¡æ¥å£ï¼š
```python
class RoutingOptimizer:
    def __init__(self, distance_calculator: IDistanceCalculator):
        # ä¾èµ–æŠ½è±¡æ¥å£ï¼Œè€Œä¸æ˜¯å…·ä½“å®ç°
        self.distance_calculator = distance_calculator
```

#### 4. å¯æ›¿æ¢æ€§åŸåˆ™
ä»»ä½•æ¨¡å—çš„å®ç°å¯ä»¥è½»æ¾æ›¿æ¢ï¼Œåªéœ€ï¼š
1. å®ç°ç›¸åŒçš„æ¥å£
2. æ›´æ–°é…ç½®æ–‡ä»¶

### æ¨¡å—æ³¨å†Œç³»ç»Ÿ

#### å·¥ä½œåŸç†
1. **é…ç½®åŠ è½½**ï¼šç³»ç»Ÿå¯åŠ¨æ—¶åŠ è½½ `config/modules.yaml`
2. **åŠ¨æ€å¯¼å…¥**ï¼šæ ¹æ®éœ€è¦åŠ¨æ€å¯¼å…¥æ¨¡å—ç±»
3. **ä¾èµ–æ³¨å…¥**ï¼šè‡ªåŠ¨è§£æå’Œæ³¨å…¥æ¨¡å—ä¾èµ–
4. **ç”Ÿå‘½å‘¨æœŸç®¡ç†**ï¼šæ”¯æŒå•ä¾‹å’Œéå•ä¾‹æ¨¡å¼

#### é…ç½®æ–‡ä»¶ç¤ºä¾‹
```yaml
modules:
  data_fetcher:
    class: "src.modules.data.implementations.simulated_data_fetcher.SimulatedDataFetcher"
    config:
      data_path: "data/synthetic/"
      cache_enabled: true
    enabled: true
    singleton: true
  
  distance_calculator:
    class: "src.modules.distance.implementations.google_distance_matrix.GoogleDistanceMatrixCalculator"
    config:
      api_key: "${GOOGLE_MAPS_API_KEY}"
    enabled: false  # é»˜è®¤ç¦ç”¨ï¼Œéœ€è¦æ—¶å¯ç”¨
    singleton: true
```

#### æ¨¡å—è·å–ç¤ºä¾‹
```python
from src.core.module_registry import ModuleRegistry

# åˆ›å»ºæ³¨å†Œè¡¨
registry = ModuleRegistry("config/modules.yaml")

# è·å–æ¨¡å—å®ä¾‹
data_fetcher = registry.get_module("data_fetcher")
distance_calculator = registry.get_module("distance_calculator")
```

### å·¥ä½œæµåè°ƒå™¨

#### æµæ°´çº¿æ‰§è¡Œ
```python
from src.core.orchestrator import PipelineOrchestrator

# åˆ›å»ºåè°ƒå™¨
orchestrator = PipelineOrchestrator(registry)

# æ‰§è¡Œæµæ°´çº¿
result = orchestrator.execute_pipeline({
    'name': 'daily_optimization',
    'modules': ['data_fetcher', 'demand_forecaster', 'routing_optimizer'],
    'parameters': {
        'date_range': ['2024-01-25', '2024-01-31'],
        'store_ids': ['M001', 'M002', 'M003']
    }
})
```

#### æµæ°´çº¿é…ç½®ç¤ºä¾‹
```yaml
# config/pipelines/daily_optimization.yaml
name: "daily_store_pickup_optimization"
schedule: "0 2 * * *"  # æ¯å¤©2:00 AM
modules:
  - data_fetcher
  - demand_forecaster
  - routing_optimizer
  - sla_predictor

parameters:
  date_range: ["2024-01-25", "2024-01-31"]
  store_ids: ["M001", "M002", "M003", "M004", "M005"]
  forecast_horizon_days: 7

output:
  formats: ["json", "csv"]
  path: "outputs/daily_optimization/"
```

---

## æ ¸å¿ƒæ¥å£è§„èŒƒ

### åŸºç¡€æ•°æ®ç±»å‹

#### StoreInfo - é—¨åº—ä¿¡æ¯
```python
@dataclass
class StoreInfo:
    store_id: str
    name: str
    address: str
    latitude: float
    longitude: float
    time_window_start: str  # "09:00"
    time_window_end: str    # "18:00"
    capacity: float
```

#### DemandForecast - éœ€æ±‚é¢„æµ‹
```python
@dataclass
class DemandForecast:
    store_id: str
    sku_id: str
    date: str
    forecast_demand: float
    lower_bound: float
    upper_bound: float
    confidence: float
```

#### RoutePlan - è·¯çº¿è§„åˆ’
```python
@dataclass
class RoutePlan:
    route_id: str
    vehicle_id: str
    store_sequence: List[str]
    arrival_times: List[str]
    departure_times: List[str]
    distances_km: List[float]
    total_distance_km: float
    total_duration_min: float
    total_cost: float
    sla_risk_score: float
```

### æ ¸å¿ƒæ¥å£å®šä¹‰

#### IDataFetcher - æ•°æ®è·å–æ¥å£
```python
class IDataFetcher(ABC):
    @abstractmethod
    def fetch_weather_data(self, date_range: tuple, locations: List[tuple]) -> pd.DataFrame:
        """è·å–å¤©æ°”æ•°æ®"""
        pass
    
    @abstractmethod
    def fetch_geospatial_data(self, bounding_box: tuple) -> Dict:
        """è·å–åœ°ç†ç©ºé—´æ•°æ®"""
        pass
    
    @abstractmethod
    def fetch_business_data(self, date_range: tuple, data_type: str) -> pd.DataFrame:
        """è·å–ä¸šåŠ¡æ•°æ®"""
        pass
    
    @abstractmethod
    def get_config(self) -> Dict[str, Any]:
        """è·å–æ•°æ®æºé…ç½®"""
        pass
    
    @abstractmethod
    def test_connection(self) -> bool:
        """æµ‹è¯•æ•°æ®æºè¿æ¥"""
        pass
```

#### IDistanceCalculator - è·ç¦»è®¡ç®—æ¥å£
```python
class IDistanceCalculator(ABC):
    @abstractmethod
    def calculate_distance_matrix(self, 
                                origins: List[tuple], 
                                destinations: List[tuple],
                                mode: str = "driving") -> pd.DataFrame:
        """è®¡ç®—è·ç¦»çŸ©é˜µ"""
        pass
    
    @abstractmethod
    def get_provider_name(self) -> str:
        """è·å–æä¾›å•†åç§°"""
        pass
    
    @abstractmethod
    def get_cost_per_request(self) -> float:
        """è·å–æ¯æ¬¡è¯·æ±‚çš„æˆæœ¬"""
        pass
```

#### IDemandForecaster - éœ€æ±‚é¢„æµ‹æ¥å£
```python
class IDemandForecaster(ABC):
    @abstractmethod
    def train(self, 
             historical_data: pd.DataFrame,
             external_features: Dict[str, pd.DataFrame] = None) -> Dict[str, Any]:
        """è®­ç»ƒé¢„æµ‹æ¨¡å‹"""
        pass
    
    @abstractmethod
    def predict(self,
               future_dates: List[str],
               store_ids: List[str],
               sku_ids: List[str],
               external_features: Dict[str, pd.DataFrame] = None) -> List[DemandForecast]:
        """è¿›è¡Œéœ€æ±‚é¢„æµ‹"""
        pass
    
    @abstractmethod
    def evaluate(self, 
                actual_data: pd.DataFrame,
                forecast_data: pd.DataFrame) -> Dict[str, float]:
        """è¯„ä¼°é¢„æµ‹æ€§èƒ½"""
        pass
```

#### IInventoryOptimizer - åº“å­˜ä¼˜åŒ–æ¥å£
```python
class IInventoryOptimizer(ABC):
    @abstractmethod
    def calculate_safety_stock(self,
                              demand_forecasts: List[DemandForecast],
                              service_level: float = 0.95,
                              lead_time_days: int = 2) -> Dict[str, float]:
        """è®¡ç®—å®‰å…¨åº“å­˜"""
        pass
    
    @abstractmethod
    def optimize_inventory_allocation(self,
                                    current_inventory: Dict[str, float],
                                    demand_forecasts: List[DemandForecast],
                                    warehouse_capacity: Dict[str, float],
                                    costs: Dict[str, float]) -> Dict[str, Any]:
        """ä¼˜åŒ–åº“å­˜åˆ†é…"""
        pass
```

#### IRoutingOptimizer - è·¯å¾„ä¼˜åŒ–æ¥å£
```python
class IRoutingOptimizer(ABC):
    @abstractmethod
    def optimize_routes(self,
                       stores: List[StoreInfo],
                       demands: Dict[str, float],
                       vehicles: List[Any],
                       distance_calculator: IDistanceCalculator,
                       time_windows: bool = True,
                       capacity_constraints: bool = True) -> List[RoutePlan]:
        """ä¼˜åŒ–é…é€è·¯å¾„"""
        pass
    
    @abstractmethod
    def robust_optimization(self,
                          stores: List[StoreInfo],
                          demand_scenarios: List[Dict[str, float]],
                          vehicles: List[Any],
                          distance_calculator: IDistanceCalculator,
                          robustness_level: float = 0.9) -> List[RoutePlan]:
        """é²æ£’ä¼˜åŒ–"""
        pass
```

#### ISLAPredictor - SLAé¢„æµ‹æ¥å£
```python
class ISLAPredictor(ABC):
    @abstractmethod
    def predict_pickup_time(self,
                           order_info: Dict[str, Any],
                           route_plan: RoutePlan,
                           store_processing_time_model: Any = None) -> Dict[str, Any]:
        """é¢„æµ‹å–è´§æ—¶é—´"""
        pass
    
    @abstractmethod
    def calculate_sla_probability(self,
                                 promised_time: datetime,
                                 predicted_time: datetime,
                                 uncertainty: float = 0.1) -> float:
        """è®¡ç®—SLAè¾¾æˆæ¦‚ç‡"""
        pass
```

#### IVisualization - å¯è§†åŒ–æ¥å£
```python
class IVisualization(ABC):
    @abstractmethod
    def create_dashboard(self,
                        data_sources: Dict[str, Any],
                        layout_config: Dict[str, Any] = None) -> Any:
        """åˆ›å»ºä»ªè¡¨æ¿"""
        pass
    
    @abstractmethod
    def plot_routes(self,
                   route_plans: List[RoutePlan],
                   store_locations: Dict[str, tuple],
                   map_provider: str = "openstreetmap") -> Any:
        """ç»˜åˆ¶è·¯çº¿å›¾"""
        pass
```

---

## æ¨¡å—å¼€å‘æŒ‡å—

### åˆ›å»ºæ–°æ¨¡å—çš„æ­¥éª¤

#### æ­¥éª¤ 1ï¼šç¡®å®šæ¨¡å—ç±»å‹
é¦–å…ˆç¡®å®šæ–°æ¨¡å—å±äºå“ªä¸ªåŠŸèƒ½åŸŸï¼š
- `data/` - æ•°æ®è·å–
- `distance/` - è·ç¦»è®¡ç®—
- `forecasting/` - é¢„æµ‹
- `inventory/` - åº“å­˜ä¼˜åŒ–
- `routing/` - è·¯å¾„ä¼˜åŒ–
- `sla/` - SLAé¢„æµ‹
- `visualization/` - å¯è§†åŒ–

#### æ­¥éª¤ 2ï¼šå®ç°æ¥å£
åœ¨å¯¹åº”ç›®å½•åˆ›å»ºå®ç°æ–‡ä»¶ï¼š

```python
# src/modules/distance/implementations/my_new_calculator.py
from typing import List, Tuple, Dict, Any
import pandas as pd
from ...interfaces import IDistanceCalculator

class MyNewDistanceCalculator(IDistanceCalculator):
    """æ–°çš„è·ç¦»è®¡ç®—å™¨å®ç°"""
    
    def __init__(self, custom_param: str = "default"):
        self.custom_param = custom_param
        
    def calculate_distance_matrix(self, 
                                 origins: List[Tuple[float, float]], 
                                 destinations: List[Tuple[float, float]], 
                                 mode: str = "driving") -> pd.DataFrame:
        # å®ç°è·ç¦»çŸ©é˜µè®¡ç®—é€»è¾‘
        distances = []
        for orig in origins:
            row = []
            for dest in destinations:
                # è®¡ç®—è·ç¦»
                distance = self._calculate_distance(orig, dest)
                row.append(distance)
            distances.append(row)
        
        return pd.DataFrame(distances)
    
    def get_provider_name(self) -> str:
        return "My New Distance Calculator"
    
    def get_cost_per_request(self) -> float:
        return 0.0  # æœ¬åœ°è®¡ç®—æ— æˆæœ¬
    
    def _calculate_distance(self, point1: Tuple[float, float], 
                           point2: Tuple[float, float]) -> float:
        """ç§æœ‰æ–¹æ³•ï¼šè®¡ç®—ä¸¤ç‚¹é—´è·ç¦»"""
        # å®ç°å…·ä½“è·ç¦»è®¡ç®—é€»è¾‘
        import math
        lat1, lon1 = point1
        lat2, lon2 = point2
        # ä½¿ç”¨ Haversine å…¬å¼
        R = 6371.0  # åœ°çƒåŠå¾„ï¼ˆå…¬é‡Œï¼‰
        # ... è®¡ç®—ä»£ç  ...
        return distance
```

#### æ­¥éª¤ 3ï¼šæ³¨å†Œæ¨¡å—
åœ¨ `config/modules.yaml` ä¸­æ·»åŠ æ–°æ¨¡å—é…ç½®ï¼š

```yaml
modules:
  my_new_calculator:
    class: "src.modules.distance.implementations.my_new_calculator.MyNewDistanceCalculator"
    config:
      custom_param: "my_value"
    enabled: true
    singleton: true
```

#### æ­¥éª¤ 4ï¼šç¼–å†™å•å…ƒæµ‹è¯•
åˆ›å»ºå¯¹åº”çš„æµ‹è¯•æ–‡ä»¶ï¼š

```python
# tests/modules/distance/test_my_new_calculator.py
import pytest
import pandas as pd
from src.modules.distance.implementations.my_new_calculator import MyNewDistanceCalculator

class TestMyNewDistanceCalculator:
    """æµ‹è¯•æ–°çš„è·ç¦»è®¡ç®—å™¨"""
    
    def test_initialization(self):
        """æµ‹è¯•åˆå§‹åŒ–"""
        calculator = MyNewDistanceCalculator(custom_param="test")
        assert calculator.custom_param == "test"
        assert calculator.get_provider_name() == "My New Distance Calculator"
    
    def test_calculate_distance_matrix(self):
        """æµ‹è¯•è·ç¦»çŸ©é˜µè®¡ç®—"""
        calculator = MyNewDistanceCalculator()
        origins = [(22.3193, 114.1694)]
        destinations = [(22.3287, 114.1883)]
        
        result = calculator.calculate_distance_matrix(origins, destinations)
        
        assert isinstance(result, pd.DataFrame)
        assert result.shape == (1, 1)
        assert result.iloc[0, 0] > 0  # è·ç¦»åº”ä¸ºæ­£æ•°
    
    def test_cost_per_request(self):
        """æµ‹è¯•è¯·æ±‚æˆæœ¬"""
        calculator = MyNewDistanceCalculator()
        assert calculator.get_cost_per_request() == 0.0
```

#### æ­¥éª¤ 5ï¼šæ›´æ–°æ–‡æ¡£
åœ¨ `docs/modules/` ä¸­æ·»åŠ æ¨¡å—æ–‡æ¡£ï¼š

```markdown
# MyNewDistanceCalculator æ¨¡å—æ–‡æ¡£

## åŠŸèƒ½è¯´æ˜
æä¾›åŸºäºè‡ªå®šä¹‰ç®—æ³•çš„è·ç¦»è®¡ç®—åŠŸèƒ½ã€‚

## é…ç½®å‚æ•°
- `custom_param`ï¼šè‡ªå®šä¹‰å‚æ•°ï¼Œé»˜è®¤å€¼ä¸º "default"

## ä½¿ç”¨æ–¹æ³•
```python
from src.core.module_registry import ModuleRegistry

registry = ModuleRegistry()
calculator = registry.get_module("my_new_calculator")

# è®¡ç®—è·ç¦»çŸ©é˜µ
origins = [(22.3193, 114.1694), (22.3287, 114.1883)]
destinations = [(22.3372, 114.1521)]
result = calculator.calculate_distance_matrix(origins, destinations)
```

## æ€§èƒ½ç‰¹ç‚¹
- è®¡ç®—ç²¾åº¦ï¼šÂ±100ç±³
- è®¡ç®—é€Ÿåº¦ï¼š1000ç‚¹/ç§’
- æ”¯æŒæ¨¡å¼ï¼šdriving, walking
```

### æ¨¡å—å¼€å‘æœ€ä½³å®è·µ

#### 1. ä¿æŒæ¥å£å…¼å®¹æ€§
- å®ç°æ‰€æœ‰æŠ½è±¡æ–¹æ³•
- éµå¾ªç±»å‹æç¤º
- ä¸ä¿®æ”¹æ¥å£ç­¾å

#### 2. é”™è¯¯å¤„ç†
```python
def calculate_distance_matrix(self, origins, destinations, mode="driving"):
    try:
        # å‚æ•°éªŒè¯
        if not origins or not destinations:
            raise ValueError("Origins and destinations cannot be empty")
        
        if mode not in ["driving", "walking", "bicycling"]:
            raise ValueError(f"Unsupported mode: {mode}")
        
        # ä¸šåŠ¡é€»è¾‘
        return self._calculate_matrix(origins, destinations)
    
    except Exception as e:
        # è®°å½•é”™è¯¯æ—¥å¿—
        logging.error(f"Failed to calculate distance matrix: {e}")
        # è¿”å›ç©ºDataFrameæˆ–æŠ›å‡ºå¼‚å¸¸
        raise
```

#### 3. é…ç½®ç®¡ç†
```python
class MyModule:
    def __init__(self, **config):
        # è®¾ç½®é»˜è®¤é…ç½®
        default_config = {
            'param1': 'default1',
            'param2': 100,
            'param3': True
        }
        
        # åˆå¹¶é…ç½®
        self.config = {**default_config, **config}
        
        # éªŒè¯é…ç½®
        self._validate_config()
    
    def _validate_config(self):
        if self.config['param2'] < 0:
            raise ValueError("param2 must be positive")
```

#### 4. ç¼“å­˜å®ç°
```python
class CachedDistanceCalculator(IDistanceCalculator):
    def __init__(self, cache_enabled=True, cache_size=1000):
        self.cache_enabled = cache_enabled
        self.cache = {}
        self.cache_size = cache_size
    
    def calculate_distance_matrix(self, origins, destinations, mode="driving"):
        cache_key = self._create_cache_key(origins, destinations, mode)
        
        if self.cache_enabled and cache_key in self.cache:
            return self.cache[cache_key]
        
        # è®¡ç®—è·ç¦»
        result = self._calculate_uncached(origins, destinations, mode)
        
        if self.cache_enabled:
            # ç®¡ç†ç¼“å­˜å¤§å°
            if len(self.cache) >= self.cache_size:
                self._evict_oldest()
            self.cache[cache_key] = result
        
        return result
    
    def _create_cache_key(self, origins, destinations, mode):
        return f"{hash(str(origins))}_{hash(str(destinations))}_{mode}"
```

### æ¨¡å—é—´é€šä¿¡

#### 1. é€šè¿‡æ¥å£é€šä¿¡
```python
# è·¯ç”±ä¼˜åŒ–å™¨ä½¿ç”¨è·ç¦»è®¡ç®—å™¨
class RoutingOptimizer(IRoutingOptimizer):
    def __init__(self, distance_calculator: IDistanceCalculator):
        self.distance_calculator = distance_calculator
    
    def optimize_routes(self, stores, demands, vehicles, **kwargs):
        # è®¡ç®—è·ç¦»çŸ©é˜µ
        locations = [(s.latitude, s.longitude) for s in stores]
        distance_matrix = self.distance_calculator.calculate_distance_matrix(
            origins=locations,
            destinations=locations
        )
        
        # ä½¿ç”¨è·ç¦»çŸ©é˜µè¿›è¡Œä¼˜åŒ–
        # ...
```

#### 2. æ•°æ®æ ¼å¼æ ‡å‡†åŒ–
```python
# ä½¿ç”¨æ ‡å‡†åŒ–çš„æ•°æ®ç±»
from src.core.interfaces import StoreInfo, DemandForecast

# åˆ›å»ºé—¨åº—ä¿¡æ¯
store = StoreInfo(
    store_id="M001",
    name="Mannings Central",
    address="Central, Hong Kong",
    latitude=22.3193,
    longitude=114.1694,
    time_window_start="09:00",
    time_window_end="18:00",
    capacity=1000
)

# åˆ›å»ºéœ€æ±‚é¢„æµ‹
forecast = DemandForecast(
    store_id="M001",
    sku_id="SKU001",
    date="2024-01-25",
    forecast_demand=150.5,
    lower_bound=120.4,
    upper_bound=180.6,
    confidence=0.95
)
```

#### 3. é”™è¯¯ä¼ æ’­
```python
def process_data(data_fetcher, demand_forecaster):
    try:
        # è·å–æ•°æ®
        weather_data = data_fetcher.fetch_weather_data(...)
        
        # è¿›è¡Œé¢„æµ‹
        forecasts = demand_forecaster.predict(
            future_dates=...,
            store_ids=...,
            external_features={'weather': weather_data}
        )
        
        return forecasts
    
    except DataFetchError as e:
        # æ•°æ®è·å–é”™è¯¯
        logging.error(f"Data fetch failed: {e}")
        raise ProcessingError(f"Failed to process data: {e}")
    
    except PredictionError as e:
        # é¢„æµ‹é”™è¯¯
        logging.error(f"Prediction failed: {e}")
        raise ProcessingError(f"Failed to generate forecasts: {e}")
```

---

## æ•°æ®ç®¡ç†ç­–ç•¥

### æ•°æ®ç›®å½•ç»“æ„
```
data/
â”œâ”€â”€ official/          # å®˜æ–¹æ•°æ®ï¼ˆä»APIè·å–ï¼‰
â”‚   â”œâ”€â”€ weather/
â”‚   â”‚   â”œâ”€â”€ 2024-01-25.csv
â”‚   â”‚   â””â”€â”€ 2024-01-26.csv
â”‚   â””â”€â”€ geospatial/
â”‚       â””â”€â”€ hk_3d_map.geojson
â”œâ”€â”€ synthetic/         # æ¨¡æ‹Ÿæ•°æ®
â”‚   â”œâ”€â”€ stores.csv
â”‚   â”œâ”€â”€ skus.csv
â”‚   â”œâ”€â”€ sales.csv
â”‚   â””â”€â”€ inventory.csv
â”œâ”€â”€ processed/         # å¤„ç†åçš„æ•°æ®
â”‚   â”œâ”€â”€ features/
â”‚   â”‚   â””â”€â”€ demand_features_2024-01.csv
â”‚   â””â”€â”€ models/
â”‚       â””â”€â”€ prophet_model.pkl
â””â”€â”€ external/          # å¤–éƒ¨æ•°æ®æº
    â””â”€â”€ hk_population.csv
```

### æ•°æ®ç”Ÿæˆ

#### ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®
```bash
# ç”Ÿæˆå®Œæ•´çš„æ¨¡æ‹Ÿæ•°æ®é›†
python scripts/generate_synthetic_data.py

# ç”Ÿæˆç‰¹å®šç±»å‹çš„æ•°æ®
python scripts/generate_synthetic_data.py --type stores --count 100
python scripts/generate_synthetic_data.py --type sales --days 30
```

#### æ¨¡æ‹Ÿæ•°æ®è„šæœ¬é…ç½®
```python
# åœ¨è„šæœ¬ä¸­é…ç½®æ•°æ®ç”Ÿæˆå‚æ•°
python scripts/generate_synthetic_data.py \
    --stores 320 \
    --skus 1000 \
    --start-date 2023-07-01 \
    --end-date 2024-01-24 \
    --output-dir data/synthetic/
```

### æ•°æ®éªŒè¯

#### æ•°æ®è´¨é‡æ£€æŸ¥
```python
# scripts/validate_data.py
import pandas as pd
from typing import List, Dict

class DataValidator:
    """æ•°æ®éªŒè¯å™¨"""
    
    @staticmethod
    def validate_store_data(df: pd.DataFrame) -> List[str]:
        """éªŒè¯é—¨åº—æ•°æ®"""
        issues = []
        
        # æ£€æŸ¥å¿…éœ€åˆ—
        required_columns = ['store_id', 'latitude', 'longitude', 'time_window_start']
        missing = [col for col in required_columns if col not in df.columns]
        if missing:
            issues.append(f"Missing columns: {missing}")
        
        # æ£€æŸ¥æ•°æ®èŒƒå›´
        if 'latitude' in df.columns:
            if (df['latitude'] < 22.15).any() or (df['latitude'] > 22.55).any():
                issues.append("Latitude out of Hong Kong range")
        
        # æ£€æŸ¥å”¯ä¸€æ€§
        if df['store_id'].duplicated().any():
            issues.append("Duplicate store_ids found")
        
        return issues
    
    @staticmethod
    def validate_sales_data(df: pd.DataFrame) -> List[str]:
        """éªŒè¯é”€å”®æ•°æ®"""
        issues = []
        
        # æ£€æŸ¥è´Ÿå€¼
        if 'demand' in df.columns and (df['demand'] < 0).any():
            issues.append("Negative demand values found")
        
        # æ£€æŸ¥æ—¥æœŸæ ¼å¼
        if 'date' in df.columns:
            try:
                pd.to_datetime(df['date'])
            except:
                issues.append("Invalid date format")
        
        return issues
```

#### è¿è¡Œæ•°æ®éªŒè¯
```bash
# éªŒè¯æ‰€æœ‰æ•°æ®æ–‡ä»¶
python scripts/validate_data.py --all

# éªŒè¯ç‰¹å®šæ•°æ®æ–‡ä»¶
python scripts/validate_data.py --file data/synthetic/stores.csv
```

### æ•°æ®å¤„ç†æµæ°´çº¿

#### ç‰¹å¾å·¥ç¨‹ç¤ºä¾‹
```python
# src/modules/data/implementations/feature_engineer.py
import pandas as pd
import numpy as np
from datetime import datetime

class FeatureEngineer:
    """ç‰¹å¾å·¥ç¨‹å¤„ç†å™¨"""
    
    def create_time_features(self, df: pd.DataFrame, date_column: str) -> pd.DataFrame:
        """åˆ›å»ºæ—¶é—´ç‰¹å¾"""
        df = df.copy()
        
        # è½¬æ¢ä¸ºdatetime
        df['date'] = pd.to_datetime(df[date_column])
        
        # æå–æ—¶é—´ç‰¹å¾
        df['year'] = df['date'].dt.year
        df['month'] = df['date'].dt.month
        df['day'] = df['date'].dt.day
        df['dayofweek'] = df['date'].dt.dayofweek
        df['weekofyear'] = df['date'].dt.isocalendar().week
        df['quarter'] = df['date'].dt.quarter
        df['is_weekend'] = df['dayofweek'].isin([5, 6]).astype(int)
        df['is_month_start'] = df['date'].dt.is_month_start.astype(int)
        df['is_month_end'] = df['date'].dt.is_month_end.astype(int)
        
        # å­£èŠ‚æ€§ç‰¹å¾
        df['sin_month'] = np.sin(2 * np.pi * df['month'] / 12)
        df['cos_month'] = np.cos(2 * np.pi * df['month'] / 12)
        
        return df
    
    def create_lag_features(self, df: pd.DataFrame, value_column: str, 
                           group_columns: List[str], lags: List[int]) -> pd.DataFrame:
        """åˆ›å»ºæ»åç‰¹å¾"""
        df = df.sort_values(['date'] + group_columns).copy()
        
        for lag in lags:
            df[f'{value_column}_lag_{lag}'] = df.groupby(group_columns)[value_column].shift(lag)
        
        return df
    
    def create_rolling_features(self, df: pd.DataFrame, value_column: str,
                               group_columns: List[str], windows: List[int]) -> pd.DataFrame:
        """åˆ›å»ºæ»šåŠ¨ç‰¹å¾"""
        df = df.sort_values(['date'] + group_columns).copy()
        
        for window in windows:
            df[f'{value_column}_rolling_mean_{window}'] = (
                df.groupby(group_columns)[value_column]
                .rolling(window=window, min_periods=1)
                .mean()
                .reset_index(level=group_columns, drop=True)
            )
            
            df[f'{value_column}_rolling_std_{window}'] = (
                df.groupby(group_columns)[value_column]
                .rolling(window=window, min_periods=1)
                .std()
                .reset_index(level=group_columns, drop=True)
            )
        
        return df
```

---

## æµ‹è¯•ç­–ç•¥

### æµ‹è¯•é‡‘å­—å¡”

```
        ç«¯åˆ°ç«¯æµ‹è¯• (10%)
            â†‘
      é›†æˆæµ‹è¯• (20%)
            â†‘
    å•å…ƒæµ‹è¯• (70%)
```

### å•å…ƒæµ‹è¯•

#### æµ‹è¯•ç›®å½•ç»“æ„
```
tests/
â”œâ”€â”€ core/
â”‚   â””â”€â”€ test_module_registry.py
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â””â”€â”€ test_data_fetcher.py
â”‚   â”œâ”€â”€ distance/
â”‚   â”‚   â””â”€â”€ test_distance_calculators.py
â”‚   â””â”€â”€ ...
â””â”€â”€ integration/
    â””â”€â”€ test_pipeline_integration.py
```

#### å•å…ƒæµ‹è¯•ç¤ºä¾‹
```python
# tests/modules/distance/test_euclidean_calculator.py
import pytest
import pandas as pd
import numpy as np
from src.modules.distance.implementations.euclidean_calculator import EuclideanDistanceCalculator

class TestEuclideanDistanceCalculator:
    """æµ‹è¯•æ¬§å‡ é‡Œå¾—è·ç¦»è®¡ç®—å™¨"""
    
    @pytest.fixture
    def calculator(self):
        """æµ‹è¯•å¤¹å…·ï¼šåˆ›å»ºè®¡ç®—å™¨å®ä¾‹"""
        return EuclideanDistanceCalculator(cache_enabled=False)
    
    @pytest.fixture
    def sample_locations(self):
        """æµ‹è¯•å¤¹å…·ï¼šæ ·æœ¬ä½ç½®"""
        return [
            (22.3193, 114.1694),  # Central
            (22.3287, 114.1883),  # Wan Chai
            (22.3372, 114.1521)   # Kowloon Tong
        ]
    
    def test_initialization(self, calculator):
        """æµ‹è¯•åˆå§‹åŒ–"""
        assert calculator.cache_enabled == False
        assert calculator.get_provider_name() == "Euclidean Distance Calculator"
        assert calculator.get_cost_per_request() == 0.0
    
    def test_calculate_distance_matrix_shape(self, calculator, sample_locations):
        """æµ‹è¯•è·ç¦»çŸ©é˜µå½¢çŠ¶"""
        origins = sample_locations[:2]
        destinations = sample_locations[1:]
        
        result = calculator.calculate_distance_matrix(origins, destinations)
        
        # éªŒè¯å½¢çŠ¶
        assert isinstance(result, pd.DataFrame)
        assert 'distance_km' in result.columns
        assert 'duration_min' in result.columns
        assert len(result) == len(origins) * len(destinations)
    
    def test_distance_values(self, calculator):
        """æµ‹è¯•è·ç¦»å€¼åˆç†æ€§"""
        # æµ‹è¯•è¿‘è·ç¦»ç‚¹
        origin = [(22.3193, 114.1694)]
        destination = [(22.3194, 114.1695)]  # çº¦100ç±³
        
        result = calculator.calculate_distance_matrix(origin, destination)
        distance = result['distance_km'].iloc[0]
        
        # è·ç¦»åº”è¯¥åœ¨åˆç†èŒƒå›´å†…
        assert 0.09 < distance < 0.11  # çº¦100ç±³
    
    def test_same_location_distance(self, calculator):
        """æµ‹è¯•ç›¸åŒä½ç½®çš„è·ç¦»ä¸º0"""
        location = [(22.3193, 114.1694)]
        
        result = calculator.calculate_distance_matrix(location, location)
        distance = result['distance_km'].iloc[0]
        
        # ç›¸åŒä½ç½®è·ç¦»åº”ä¸º0
        assert distance == 0.0
    
    def test_cache_functionality(self):
        """æµ‹è¯•ç¼“å­˜åŠŸèƒ½"""
        calculator = EuclideanDistanceCalculator(cache_enabled=True)
        origins = [(22.3193, 114.1694)]
        destinations = [(22.3287, 114.1883)]
        
        # ç¬¬ä¸€æ¬¡è®¡ç®—
        result1 = calculator.calculate_distance_matrix(origins, destinations)
        
        # ç¬¬äºŒæ¬¡è®¡ç®—åº”è¯¥ä½¿ç”¨ç¼“å­˜
        result2 = calculator.calculate_distance_matrix(origins, destinations)
        
        # éªŒè¯ç»“æœç›¸åŒ
        pd.testing.assert_frame_equal(result1, result2)
    
    @pytest.mark.parametrize("mode", ["driving", "walking", "bicycling"])
    def test_different_modes(self, calculator, sample_locations, mode):
        """æµ‹è¯•ä¸åŒäº¤é€šæ¨¡å¼"""
        origins = sample_locations[:1]
        destinations = sample_locations[1:2]
        
        result = calculator.calculate_distance_matrix(origins, destinations, mode=mode)
        
        # è·ç¦»åº”è¯¥ç›¸åŒï¼ˆæ¬§å‡ é‡Œå¾—è·ç¦»ä¸è€ƒè™‘æ¨¡å¼ï¼‰
        assert result['distance_km'].iloc[0] > 0
```

#### å‚æ•°åŒ–æµ‹è¯•
```python
@pytest.mark.parametrize("input_data,expected", [
    ([(0, 0), (0, 1)], 111.32),  # 1åº¦çº¬åº¦ â‰ˆ 111km
    ([(0, 0), (1, 0)], 111.32),  # 1åº¦ç»åº¦ â‰ˆ 111kmï¼ˆåœ¨èµ¤é“ï¼‰
    ([(22.3, 114.1), (22.3, 114.2)], 10.4),  # é¦™æ¸¯èŒƒå›´å†…
])
def test_specific_distances(calculator, input_data, expected):
    """æµ‹è¯•ç‰¹å®šè·ç¦»è®¡ç®—"""
    origins = [input_data[0]]
    destinations = [input_data[1]]
    
    result = calculator.calculate_distance_matrix(origins, destinations)
    distance = result['distance_km'].iloc[0]
    
    # å…è®¸5%çš„è¯¯å·®
    assert abs(distance - expected) / expected < 0.05
```

### é›†æˆæµ‹è¯•

#### æ¨¡å—é—´é›†æˆæµ‹è¯•
```python
# tests/integration/test_data_pipeline.py
import pytest
from src.core.module_registry import ModuleRegistry
from src.core.orchestrator import PipelineOrchestrator

class TestDataPipelineIntegration:
    """æ•°æ®æµæ°´çº¿é›†æˆæµ‹è¯•"""
    
    @pytest.fixture
    def registry(self):
        """åˆ›å»ºæ¨¡å—æ³¨å†Œè¡¨"""
        registry = ModuleRegistry("config/modules.yaml")
        return registry
    
    @pytest.fixture
    def orchestrator(self, registry):
        """åˆ›å»ºåè°ƒå™¨"""
        return PipelineOrchestrator(registry)
    
    def test_data_fetch_and_forecast(self, orchestrator):
        """æµ‹è¯•æ•°æ®è·å–å’Œé¢„æµ‹é›†æˆ"""
        pipeline_config = {
            'name': 'test_pipeline',
            'modules': ['data_fetcher', 'demand_forecaster'],
            'date_range': ('2024-01-01', '2024-01-07'),
            'forecast_dates': ['2024-01-08', '2024-01-09'],
            'store_ids': ['M001', 'M002'],
            'sku_ids': ['SKU001'],
            'locations': [(22.3193, 114.1694)]
        }
        
        # æ‰§è¡Œæµæ°´çº¿
        result = orchestrator.execute_pipeline(pipeline_config)
        
        # éªŒè¯ç»“æœ
        assert result['pipeline_name'] == 'test_pipeline'
        assert 'execution_time' in result
        assert 'results' in result
        assert 'demand_forecasts' in result['results']
        
        forecasts = result['results']['demand_forecasts']
        assert len(forecasts) > 0
        
        # éªŒè¯é¢„æµ‹æ•°æ®ç»“æ„
        forecast = forecasts[0]
        assert hasattr(forecast, 'store_id')
        assert hasattr(forecast, 'sku_id')
        assert hasattr(forecast, 'date')
        assert hasattr(forecast, 'forecast_demand')
    
    def test_module_dependency_injection(self, registry):
        """æµ‹è¯•æ¨¡å—ä¾èµ–æ³¨å…¥"""
        # è·å–è·ç¦»è®¡ç®—å™¨
        distance_calculator = registry.get_module('distance_calculator')
        
        # è·å–è·¯ç”±ä¼˜åŒ–å™¨ï¼ˆä¾èµ–è·ç¦»è®¡ç®—å™¨ï¼‰
        routing_optimizer = registry.get_module('routing_optimizer')
        
        # éªŒè¯è·¯ç”±ä¼˜åŒ–å™¨å¯ä»¥ä½¿ç”¨è·ç¦»è®¡ç®—å™¨
        assert hasattr(routing_optimizer, 'distance_calculator')
        assert routing_optimizer.distance_calculator is not None
    
    def test_config_switching(self):
        """æµ‹è¯•é…ç½®åˆ‡æ¢"""
        # æµ‹è¯•åˆ‡æ¢è·ç¦»è®¡ç®—å™¨
        registry = ModuleRegistry()
        
        # æ³¨å†Œä¸¤ç§è·ç¦»è®¡ç®—å™¨
        registry.register_module(
            module_name='calc_euclidean',
            module_class='src.modules.distance.implementations.euclidean_calculator.EuclideanDistanceCalculator',
            config={'cache_enabled': True}
        )
        
        registry.register_module(
            module_name='calc_google',
            module_class='src.modules.distance.implementations.google_distance_matrix.GoogleDistanceMatrixCalculator',
            config={'api_key': 'test_key'},
            enabled=False  # é»˜è®¤ç¦ç”¨
        )
        
        # ä½¿ç”¨æ¬§å‡ é‡Œå¾—è®¡ç®—å™¨
        euclidean = registry.get_module('calc_euclidean')
        assert euclidean.get_provider_name() == "Euclidean Distance Calculator"
        
        # åˆ‡æ¢åˆ°Googleè®¡ç®—å™¨
        registry.modules['calc_euclidean'].enabled = False
        registry.modules['calc_google'].enabled = True
        
        google = registry.get_module('calc_google')
        assert "Google" in google.get_provider_name()
```

### ç«¯åˆ°ç«¯æµ‹è¯•

#### å®Œæ•´å·¥ä½œæµæµ‹è¯•
```python
# tests/integration/test_end_to_end.py
import pytest
import json
from pathlib import Path
from datetime import datetime

class TestEndToEndWorkflow:
    """ç«¯åˆ°ç«¯å·¥ä½œæµæµ‹è¯•"""
    
    def test_complete_pipeline(self, tmp_path):
        """æµ‹è¯•å®Œæ•´æµæ°´çº¿"""
        from src.core.module_registry import ModuleRegistry
        from src.core.orchestrator import PipelineOrchestrator
        
        # åˆ›å»ºä¸´æ—¶è¾“å‡ºç›®å½•
        output_dir = tmp_path / "outputs"
        output_dir.mkdir()
        
        # ä½¿ç”¨æµ‹è¯•é…ç½®
        registry = ModuleRegistry("config/test_modules.yaml")
        orchestrator = PipelineOrchestrator(registry)
        
        # å®Œæ•´æµæ°´çº¿é…ç½®
        pipeline_config = {
            'name': 'end_to_end_test',
            'modules': [
                'data_fetcher',
                'demand_forecaster',
                'inventory_optimizer',
                'routing_optimizer',
                'sla_predictor'
            ],
            'date_range': ('2024-01-01', '2024-01-07'),
            'forecast_dates': ['2024-01-08', '2024-01-09', '2024-01-10'],
            'store_ids': ['M001', 'M002', 'M003'],
            'sku_ids': ['SKU001', 'SKU002'],
            'locations': [
                (22.3193, 114.1694),
                (22.3287, 114.1883),
                (22.3372, 114.1521)
            ],
            'output_path': str(output_dir)
        }
        
        # æ‰§è¡Œå®Œæ•´æµæ°´çº¿
        result = orchestrator.execute_pipeline(pipeline_config)
        
        # éªŒè¯ç»“æœå®Œæ•´æ€§
        assert result['execution_time'] > 0
        assert 'results' in result
        
        results = result['results']
        
        # éªŒè¯æ¯ä¸ªæ¨¡å—çš„è¾“å‡º
        assert 'weather_data' in results or 'error' in results
        assert 'demand_forecasts' in results
        assert len(results['demand_forecasts']) > 0
        
        # éªŒè¯è¾“å‡ºæ–‡ä»¶
        output_files = list(output_dir.glob("*"))
        assert len(output_files) > 0
        
        # æ£€æŸ¥è‡³å°‘æœ‰ä¸€ä¸ªJSONæˆ–CSVæ–‡ä»¶
        json_files = list(output_dir.glob("*.json"))
        csv_files = list(output_dir.glob("*.csv"))
        assert len(json_files) > 0 or len(csv_files) > 0
    
    def test_error_handling(self):
        """æµ‹è¯•é”™è¯¯å¤„ç†"""
        from src.core.module_registry import ModuleRegistry
        
        registry = ModuleRegistry()
        
        # æ³¨å†Œä¸€ä¸ªæœ‰é”™è¯¯çš„æ¨¡å—
        registry.register_module(
            module_name='faulty_module',
            module_class='tests.faulty_module.FaultyImplementation',
            config={}
        )
        
        # åº”è¯¥æŠ›å‡ºå¼‚å¸¸
        with pytest.raises(Exception):
            registry.get_module('faulty_module')
```

### æ€§èƒ½æµ‹è¯•

#### æ€§èƒ½åŸºå‡†æµ‹è¯•
```python
# tests/performance/test_performance.py
import pytest
import time
import pandas as pd
from src.modules.distance.implementations.euclidean_calculator import EuclideanDistanceCalculator

class TestPerformance:
    """æ€§èƒ½æµ‹è¯•"""
    
    @pytest.mark.benchmark
    def test_distance_matrix_performance(self):
        """æµ‹è¯•è·ç¦»çŸ©é˜µè®¡ç®—æ€§èƒ½"""
        calculator = EuclideanDistanceCalculator(cache_enabled=False)
        
        # ç”Ÿæˆæµ‹è¯•æ•°æ®
        n_points = 100
        locations = [
            (22.3 + i * 0.001, 114.1 + i * 0.001)
            for i in range(n_points)
        ]
        
        # æ€§èƒ½æµ‹è¯•
        start_time = time.time()
        
        result = calculator.calculate_distance_matrix(locations, locations)
        
        end_time = time.time()
        execution_time = end_time - start_time
        
        # éªŒè¯æ€§èƒ½
        assert execution_time < 1.0  # åº”åœ¨1ç§’å†…å®Œæˆ
        
        # è®°å½•æ€§èƒ½æŒ‡æ ‡
        print(f"\nPerformance metrics:")
        print(f"  Points: {n_points}")
        print(f"  Matrix size: {n_points} Ã— {n_points}")
        print(f"  Execution time: {execution_time:.3f} seconds")
        print(f"  Time per point pair: {(execution_time * 1e6) / (n_points * n_points):.2f} Î¼s")
    
    @pytest.mark.benchmark
    @pytest.mark.parametrize("cache_enabled", [True, False])
    def test_cache_performance_impact(self, cache_enabled, benchmark):
        """æµ‹è¯•ç¼“å­˜å¯¹æ€§èƒ½çš„å½±å“"""
        calculator = EuclideanDistanceCalculator(cache_enabled=cache_enabled)
        locations = [(22.3193, 114.1694), (22.3287, 114.1883)]
        
        # ç¬¬ä¸€æ¬¡è®¡ç®—
        result1 = calculator.calculate_distance_matrix(locations, locations)
        
        # ç¬¬äºŒæ¬¡è®¡ç®—ï¼ˆåº”å—ç›Šäºç¼“å­˜ï¼‰
        result2 = calculator.calculate_distance_matrix(locations, locations)
        
        # éªŒè¯ç»“æœä¸€è‡´æ€§
        pd.testing.assert_frame_equal(result1, result2)
        
        print(f"\nCache impact (enabled={cache_enabled}):")
        print(f"  Cache hit expected: {cache_enabled}")
```

### æµ‹è¯•è¿è¡Œä¸æŠ¥å‘Š

#### è¿è¡Œæµ‹è¯•å¥—ä»¶
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæ¨¡å—çš„æµ‹è¯•
pytest tests/modules/distance/

# è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶
pytest tests/modules/distance/test_euclidean_calculator.py

# è¿è¡Œç‰¹å®šæµ‹è¯•å‡½æ•°
pytest tests/modules/distance/test_euclidean_calculator.py::TestEuclideanDistanceCalculator::test_distance_values

# è¿è¡Œæ ‡è®°çš„æµ‹è¯•
pytest -m benchmark
pytest -m "not slow"
```

#### æµ‹è¯•è¦†ç›–ç‡
```bash
# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=src --cov-report=html

# æŸ¥çœ‹è¦†ç›–ç‡æ‘˜è¦
pytest --cov=src --cov-report=term-missing

# ç”ŸæˆXMLæ ¼å¼çš„è¦†ç›–ç‡æŠ¥å‘Šï¼ˆç”¨äºCI/CDï¼‰
pytest --cov=src --cov-report=xml:coverage.xml
```

#### æµ‹è¯•é…ç½®
```ini
# pytest.ini
[pytest]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts = 
    --strict-markers
    --strict-config
    --tb=short
    --color=yes
    -v
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    benchmark: performance benchmark tests
    integration: integration tests
    e2e: end-to-end tests
```

---

## ä»£ç è´¨é‡ä¸è§„èŒƒ

### ä»£ç æ ¼å¼åŒ–

#### Black ä»£ç æ ¼å¼åŒ–
```bash
# æ ¼å¼åŒ–æ‰€æœ‰ä»£ç 
black src/ tests/

# æ£€æŸ¥å“ªäº›æ–‡ä»¶éœ€è¦æ ¼å¼åŒ–
black --check src/ tests/

# æ ¼å¼åŒ–æŒ‡å®šæ–‡ä»¶
black src/modules/distance/implementations/euclidean_calculator.py
```

#### isort å¯¼å…¥æ’åº
```bash
# æ’åºæ‰€æœ‰å¯¼å…¥
isort src/ tests/

# æ£€æŸ¥å¯¼å…¥æ’åº
isort --check-only src/ tests/
```

### ä»£ç é£æ ¼æ£€æŸ¥

#### Flake8 æ£€æŸ¥
```bash
# è¿è¡Œflake8æ£€æŸ¥
flake8 src/ tests/

# å¿½ç•¥ç‰¹å®šé”™è¯¯
flake8 --extend-ignore=E203,E501 src/

# æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
flake8 --statistics src/
```

#### Flake8 é…ç½®
```ini
# .flake8
[flake8]
max-line-length = 88
extend-ignore = 
    E203,  # Whitespace before ':'
    W503,  # Line break before binary operator
    C901   # Function is too complex
exclude = 
    .git,
    __pycache__,
    build,
    dist,
    envs,
    venv
per-file-ignores = 
    __init__.py:F401
```

### ç±»å‹æ£€æŸ¥

#### MyPy ç±»å‹æ£€æŸ¥
```bash
# è¿è¡Œç±»å‹æ£€æŸ¥
mypy src/

# æ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯
mypy --pretty src/

# ç”ŸæˆHTMLæŠ¥å‘Š
mypy --html-report mypy_report src/
```

#### MyPy é…ç½®
```ini
# mypy.ini
[mypy]
python_version = 3.9
warn_return_any = True
warn_unused_configs = True
disallow_untyped_defs = True
disallow_incomplete_defs = True
check_untyped_defs = True
disallow_untyped_decorators = True
no_implicit_optional = True
warn_redundant_casts = True
warn_unused_ignores = True
warn_no_return = True
warn_unreachable = True

[mypy-pandas.*]
ignore_missing_imports = True

[mypy-googlemaps.*]
ignore_missing_imports = True
```

### é¢„æäº¤é’©å­

#### é¢„æäº¤é…ç½®
```yaml
# .pre-commit-config.yaml
repos:
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.4.0
    hooks:
      - id: trailing-whitespace
      - id: end-of-file-fixer
      - id: check-yaml
      - id: check-added-large-files
      - id: check-merge-conflict
      - id: check-case-conflict
  
  - repo: https://github.com/psf/black
    rev: 23.9.1
    hooks:
      - id: black
        language_version: python3
  
  - repo: https://github.com/PyCQA/isort
    rev: 5.12.0
    hooks:
      - id: isort
        args: ["--profile", "black"]
  
  - repo: https://github.com/PyCQA/flake8
    rev: 6.1.0
    hooks:
      - id: flake8
        args: ["--max-line-length=88", "--extend-ignore=E203,W503"]
  
  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.6.0
    hooks:
      - id: mypy
        additional_dependencies: 
          - types-requests
          - types-PyYAML
          - pandas-stubs
```

#### å®‰è£…é¢„æäº¤é’©å­
```bash
# å®‰è£…é¢„æäº¤é’©å­
pre-commit install

# åœ¨æ‰€æœ‰æ–‡ä»¶ä¸Šè¿è¡Œé¢„æäº¤é’©å­
pre-commit run --all-files

# è¿è¡Œç‰¹å®šé’©å­
pre-commit run black --all-files
```

### æ–‡æ¡£å­—ç¬¦ä¸²è§„èŒƒ

#### Google é£æ ¼æ–‡æ¡£å­—ç¬¦ä¸²
```python
def calculate_distance_matrix(self, origins, destinations, mode="driving"):
    """è®¡ç®—ä¸¤ç‚¹é—´çš„è·ç¦»çŸ©é˜µã€‚
    
    Args:
        origins: èµ·ç‚¹åæ ‡åˆ—è¡¨ï¼Œæ ¼å¼ä¸º [(lat1, lng1), (lat2, lng2), ...]
        destinations: ç»ˆç‚¹åæ ‡åˆ—è¡¨ï¼Œæ ¼å¼ä¸originsç›¸åŒ
        mode: äº¤é€šæ¨¡å¼ï¼Œå¯é€‰å€¼ä¸º "driving", "walking", "bicycling"
            Default: "driving"
    
    Returns:
        pandas.DataFrame: åŒ…å«è·ç¦»å’Œæ—¶é—´çš„DataFrameï¼ŒåŒ…å«ä»¥ä¸‹åˆ—ï¼š
            - distance_km: è·ç¦»ï¼ˆå…¬é‡Œï¼‰
            - duration_min: æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
    
    Raises:
        ValueError: å½“è¾“å…¥å‚æ•°æ— æ•ˆæ—¶
        ConnectionError: å½“APIè¿æ¥å¤±è´¥æ—¶
    
    Example:
        >>> calculator = EuclideanDistanceCalculator()
        >>> origins = [(22.3193, 114.1694)]
        >>> destinations = [(22.3287, 114.1883)]
        >>> result = calculator.calculate_distance_matrix(origins, destinations)
        >>> print(result['distance_km'].iloc[0])
        1.234
    """
    # å®ç°ä»£ç ...
```

#### ç±»å‹æç¤ºæœ€ä½³å®è·µ
```python
from typing import List, Tuple, Dict, Any, Optional, Union
import pandas as pd

def process_data(
    data: pd.DataFrame,
    config: Dict[str, Any],
    threshold: Optional[float] = None,
    verbose: bool = False
) -> Tuple[pd.DataFrame, Dict[str, float]]:
    """å¤„ç†æ•°æ®å¹¶è¿”å›ç»“æœå’Œç»Ÿè®¡ä¿¡æ¯ã€‚
    
    Args:
        data: è¾“å…¥æ•°æ®
        config: å¤„ç†é…ç½®
        threshold: å¯é€‰é˜ˆå€¼å‚æ•°
        verbose: æ˜¯å¦æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
    
    Returns:
        å¤„ç†åçš„æ•°æ®å’Œç»Ÿè®¡ä¿¡æ¯
    """
    # å®ç°ä»£ç ...
    return processed_data, stats
```

---

## åä½œå¼€å‘æµç¨‹

### Git å·¥ä½œæµ

#### åˆ†æ”¯ç­–ç•¥
```
main (ä¿æŠ¤åˆ†æ”¯)
    â†‘
develop (ä¿æŠ¤åˆ†æ”¯)
    â†‘
feature/xxx (åŠŸèƒ½åˆ†æ”¯)
bugfix/xxx (Bugä¿®å¤åˆ†æ”¯)
hotfix/xxx (ç´§æ€¥ä¿®å¤åˆ†æ”¯)
```

#### åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
```bash
# ä»developåˆ†æ”¯åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout develop
git pull origin develop
git checkout -b feature/distance-google-api

# æˆ–ä½¿ç”¨å¿«æ·è„šæœ¬
python scripts/create_feature_branch.py --name distance-google-api
```

#### æäº¤è§„èŒƒ
ä½¿ç”¨ Conventional Commits æ ¼å¼ï¼š
```
<type>[optional scope]: <description>

[optional body]

[optional footer(s)]
```

æäº¤ç±»å‹ï¼š
- `feat`: æ–°åŠŸèƒ½
- `fix`: Bugä¿®å¤
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
- `refactor`: ä»£ç é‡æ„
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·

ç¤ºä¾‹ï¼š
```bash
# æ–°åŠŸèƒ½
git commit -m "feat(distance): add Google Distance Matrix API integration"

# Bugä¿®å¤
git commit -m "fix(routing): fix time window constraint in VRP model"

# æ–‡æ¡£æ›´æ–°
git commit -m "docs: update API documentation for new modules"
```

### ä»£ç å®¡æŸ¥

#### Pull Request æ¨¡æ¿
```markdown
## PR ç±»å‹
- [ ] æ–°åŠŸèƒ½ (feat)
- [ ] Bugä¿®å¤ (fix)
- [ ] æ–‡æ¡£æ›´æ–° (docs)
- [ ] ä»£ç æ ·å¼ (style)
- [ ] ä»£ç é‡æ„ (refactor)
- [ ] æµ‹è¯• (test)
- [ ] é…ç½®å˜æ›´ (chore)
- [ ] æ€§èƒ½ä¼˜åŒ– (perf)

## æè¿°
è¯·è¯¦ç»†æè¿°æœ¬æ¬¡PRçš„å†…å®¹ï¼š

### èƒŒæ™¯
[ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªå˜æ›´ï¼Ÿè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ]

### å˜æ›´å†…å®¹
[å…·ä½“åšäº†å“ªäº›ä¿®æ”¹ï¼Ÿ]

### å½±å“èŒƒå›´
[å“ªäº›æ¨¡å—å—åˆ°å½±å“ï¼Ÿæ˜¯å¦æœ‰ç ´åæ€§å˜æ›´ï¼Ÿ]

## æµ‹è¯•æƒ…å†µ

### å•å…ƒæµ‹è¯•
- [ ] å·²æ·»åŠ æ–°æµ‹è¯•
- [ ] æ‰€æœ‰ç°æœ‰æµ‹è¯•é€šè¿‡
- [ ] æµ‹è¯•è¦†ç›–ç‡ï¼š[ç™¾åˆ†æ¯”]

### é›†æˆæµ‹è¯•
- [ ] å·²æµ‹è¯•ä¸å…¶ä»–æ¨¡å—çš„é›†æˆ
- [ ] ç«¯åˆ°ç«¯æµç¨‹æµ‹è¯•é€šè¿‡

### æ‰‹åŠ¨æµ‹è¯•
- [ ] åœ¨æœ¬åœ°ç¯å¢ƒéªŒè¯
- [ ] æµ‹è¯•æ•°æ®ï¼š[æè¿°æµ‹è¯•æ•°æ®]

## æ£€æŸ¥æ¸…å•
- [ ] ä»£ç éµå¾ªPEP8è§„èŒƒ
- [ ] æ·»åŠ äº†å¿…è¦çš„ç±»å‹æç¤º
- [ ] æ›´æ–°äº†ç›¸å…³æ–‡æ¡£
- [ ] æ›´æ–°äº†CHANGELOGï¼ˆå¦‚é€‚ç”¨ï¼‰
- [ ] æ²¡æœ‰å¼•å…¥æ–°çš„è­¦å‘Šæˆ–é”™è¯¯
- [ ] ä»£ç å·²ç»è¿‡è‡ªæˆ‘å®¡æŸ¥

## æˆªå›¾/æ¼”ç¤º
[å¦‚æœ‰ç•Œé¢å˜æ›´ï¼Œè¯·æä¾›æˆªå›¾]
[æˆ–æä¾›æ¼”ç¤ºé“¾æ¥]

## ç›¸å…³Issue
Close #123, Fix #456
```

#### å®¡æŸ¥æ¸…å•
1. **ä»£ç è´¨é‡**
   - [ ] ä»£ç æ˜¯å¦æ¸…æ™°æ˜“è¯»ï¼Ÿ
   - [ ] æ˜¯å¦æœ‰é€‚å½“çš„æ³¨é‡Šï¼Ÿ
   - [ ] ç±»å‹æç¤ºæ˜¯å¦æ­£ç¡®ï¼Ÿ
   - [ ] é”™è¯¯å¤„ç†æ˜¯å¦å……åˆ†ï¼Ÿ

2. **åŠŸèƒ½æ­£ç¡®æ€§**
   - [ ] æ˜¯å¦å®ç°äº†éœ€æ±‚ï¼Ÿ
   - [ ] æ˜¯å¦æœ‰è¾¹ç¼˜æƒ…å†µå¤„ç†ï¼Ÿ
   - [ ] æ€§èƒ½æ˜¯å¦å¯æ¥å—ï¼Ÿ

3. **æµ‹è¯•è¦†ç›–**
   - [ ] æ˜¯å¦æœ‰å……åˆ†çš„æµ‹è¯•ï¼Ÿ
   - [ ] æµ‹è¯•æ˜¯å¦é€šè¿‡ï¼Ÿ
   - [ ] è¦†ç›–ç‡æ˜¯å¦è¶³å¤Ÿï¼Ÿ

4. **æ–‡æ¡£æ›´æ–°**
   - [ ] æ˜¯å¦æ›´æ–°äº†ç›¸å…³æ–‡æ¡£ï¼Ÿ
   - [ ] APIæ–‡æ¡£æ˜¯å¦å‡†ç¡®ï¼Ÿ
   - [ ] é…ç½®è¯´æ˜æ˜¯å¦æ¸…æ™°ï¼Ÿ

### å›¢é˜Ÿåä½œå·¥å…·

#### æ¯æ—¥ç«™ä¼š
- **æ—¶é—´**ï¼šæ¯å¤© 9:00 PMï¼ˆ15åˆ†é’Ÿï¼‰
- **æ ¼å¼**ï¼š
  1. æ˜¨å¤©å®Œæˆäº†ä»€ä¹ˆï¼Ÿ
  2. ä»Šå¤©è®¡åˆ’åšä»€ä¹ˆï¼Ÿ
  3. é‡åˆ°ä»€ä¹ˆé˜»ç¢ï¼Ÿ

#### é¡¹ç›®ç®¡ç†
```bash
# ä½¿ç”¨GitHub Projectsç®¡ç†ä»»åŠ¡
# åˆ—ï¼šBacklog â†’ To Do â†’ In Progress â†’ Review â†’ Done

# åˆ›å»ºä»»åŠ¡Issue
gh issue create --title "[æ•°æ®] é›†æˆé¦™æ¸¯å¤©æ–‡å°API" \
                --body "éœ€è¦è·å–å®æ—¶å¤©æ°”æ•°æ®ç”¨äºéœ€æ±‚é¢„æµ‹" \
                --label "enhancement" \
                --assignee "@æ•°æ®å·¥ç¨‹å¸ˆ"
```

#### æ²Ÿé€šè§„èŒƒ
- **æŠ€æœ¯è®¨è®º**ï¼šGitHub Issues
- **ä»£ç å®¡æŸ¥**ï¼šGitHub Pull Requests
- **å³æ—¶æ²Ÿé€š**ï¼šå¾®ä¿¡ç¾¤ï¼ˆç´§æ€¥é—®é¢˜ï¼‰
- **ä¼šè®®è®°å½•**ï¼šä¿å­˜åˆ° `docs/meeting_notes/`

---

## éƒ¨ç½²ä¸è¿ç»´

### æœ¬åœ°éƒ¨ç½²

#### è¿è¡Œä¸»åº”ç”¨
```bash
# æ¿€æ´»ç¯å¢ƒ
conda activate mannings-sla

# è¿è¡Œä¸»åº”ç”¨
python src/main.py

# æŸ¥çœ‹æ—¥å¿—
tail -f logs/app.log
```

#### è¿è¡Œä»ªè¡¨æ¿
```bash
# å¯åŠ¨Streamlitä»ªè¡¨æ¿
streamlit run src/visualization/dashboard/app.py

# æŒ‡å®šç«¯å£
streamlit run src/visualization/dashboard/app.py --server.port 8501

# æ— æµè§ˆå™¨æ¨¡å¼
streamlit run src/visualization/dashboard/app.py --server.headless true
```

### Docker éƒ¨ç½²

#### æ„å»ºé•œåƒ
```bash
# æ„å»ºDockeré•œåƒ
docker build -t mannings-sla:latest .

# æ·»åŠ æ ‡ç­¾
docker tag mannings-sla:latest mannings-sla:1.0.0
```

#### è¿è¡Œå®¹å™¨
```bash
# è¿è¡Œå®¹å™¨
docker run -d \
  --name mannings-sla \
  -p 8501:8501 \
  -v $(pwd)/data:/app/data \
  -v $(pwd)/logs:/app/logs \
  -v $(pwd)/outputs:/app/outputs \
  -e GOOGLE_MAPS_API_KEY=your_key \
  -e HKO_API_KEY=your_key \
  mannings-sla:latest

# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker ps
docker logs mannings-sla
```

#### Docker Compose
```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f app

# åœæ­¢æœåŠ¡
docker-compose down
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

#### ç¯å¢ƒè¦æ±‚
```bash
# æœåŠ¡å™¨è§„æ ¼
- CPU: 4æ ¸ä»¥ä¸Š
- å†…å­˜: 16GBä»¥ä¸Š
- å­˜å‚¨: 100GB SSD
- ç½‘ç»œ: å…¬ç½‘IPï¼Œé˜²ç«å¢™å¼€æ”¾8501ç«¯å£

# ä¾èµ–è½¯ä»¶
- Docker 20.10+
- Docker Compose 2.0+
- Nginx (åå‘ä»£ç†)
- Certbot (SSLè¯ä¹¦)
```

#### éƒ¨ç½²è„šæœ¬
```bash
#!/bin/bash
# scripts/deploy_production.sh

set -e

echo "ğŸš€ Starting production deployment..."

# 1. æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# 2. æ„å»ºDockeré•œåƒ
docker-compose build

# 3. åœæ­¢ç°æœ‰æœåŠ¡
docker-compose down

# 4. å¯åŠ¨æ–°æœåŠ¡
docker-compose up -d

# 5. è¿è¡Œæ•°æ®åº“è¿ç§»ï¼ˆå¦‚æœæœ‰ï¼‰
# docker-compose exec app python manage.py migrate

# 6. æ”¶é›†é™æ€æ–‡ä»¶ï¼ˆå¦‚æœæœ‰ï¼‰
# docker-compose exec app python manage.py collectstatic --noinput

echo "âœ… Deployment completed!"
echo "ğŸ“Š Check status: docker-compose ps"
echo "ğŸ“‹ Check logs: docker-compose logs -f"
```

#### Nginx é…ç½®
```nginx
# /etc/nginx/sites-available/mannings-sla
server {
    listen 80;
    server_name mannings.example.com;
    
    location / {
        proxy_pass http://localhost:8501;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # WebSocketæ”¯æŒ
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}
```

#### SSL é…ç½®
```bash
# ä½¿ç”¨Let's Encryptè·å–SSLè¯ä¹¦
sudo apt-get install certbot python3-certbot-nginx
sudo certbot --nginx -d mannings.example.com

# è‡ªåŠ¨ç»­æœŸ
sudo certbot renew --dry-run
```

### ç›‘æ§ä¸æ—¥å¿—

#### æ—¥å¿—é…ç½®
```python
# src/core/logging_config.py
import logging
import logging.handlers
from pathlib import Path

def setup_logging(log_level=logging.INFO, log_file="logs/app.log"):
    """é…ç½®æ—¥å¿—ç³»ç»Ÿ"""
    
    # åˆ›å»ºæ—¥å¿—ç›®å½•
    log_path = Path(log_file)
    log_path.parent.mkdir(parents=True, exist_ok=True)
    
    # é…ç½®æ—¥å¿—æ ¼å¼
    formatter = logging.Formatter(
        '%(asctime)s - %(name)s - %(levelname)s - %(module)s:%(lineno)d - %(message)s'
    )
    
    # æ§åˆ¶å°å¤„ç†å™¨
    console_handler = logging.StreamHandler()
    console_handler.setFormatter(formatter)
    console_handler.setLevel(log_level)
    
    # æ–‡ä»¶å¤„ç†å™¨ï¼ˆæŒ‰å¤§å°è½®è½¬ï¼‰
    file_handler = logging.handlers.RotatingFileHandler(
        log_file,
        maxBytes=10*1024*1024,  # 10MB
        backupCount=5
    )
    file_handler.setFormatter(formatter)
    file_handler.setLevel(logging.DEBUG)
    
    # é…ç½®æ ¹æ—¥å¿—è®°å½•å™¨
    root_logger = logging.getLogger()
    root_logger.setLevel(logging.DEBUG)
    root_logger.addHandler(console_handler)
    root_logger.addHandler(file_handler)
    
    # è®¾ç½®ç¬¬ä¸‰æ–¹åº“çš„æ—¥å¿—çº§åˆ«
    logging.getLogger('urllib3').setLevel(logging.WARNING)
    logging.getLogger('googleapiclient').setLevel(logging.WARNING)
    
    return root_logger
```

#### å¥åº·æ£€æŸ¥ç«¯ç‚¹
```python
# src/api/health.py
from fastapi import APIRouter, HTTPException
import psutil
import datetime

router = APIRouter()

@router.get("/health")
async def health_check():
    """å¥åº·æ£€æŸ¥ç«¯ç‚¹"""
    try:
        # æ£€æŸ¥ç³»ç»Ÿèµ„æº
        cpu_percent = psutil.cpu_percent(interval=1)
        memory = psutil.virtual_memory()
        disk = psutil.disk_usage('/')
        
        # æ£€æŸ¥å…³é”®æœåŠ¡
        services_status = {
            'database': check_database_connection(),
            'redis': check_redis_connection(),
            'api_services': check_external_apis()
        }
        
        health_status = {
            'status': 'healthy',
            'timestamp': datetime.datetime.now().isoformat(),
            'system': {
                'cpu_percent': cpu_percent,
                'memory_percent': memory.percent,
                'disk_percent': disk.percent
            },
            'services': services_status
        }
        
        # å¦‚æœæœ‰æœåŠ¡ä¸å¯ç”¨ï¼Œè¿”å›éƒ¨åˆ†å¥åº·
        if any(status == 'unhealthy' for status in services_status.values()):
            health_status['status'] = 'degraded'
        
        return health_status
        
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))
```

#### æ€§èƒ½ç›‘æ§
```python
# src/core/monitoring.py
import time
from functools import wraps
from typing import Callable, Any
import logging

logger = logging.getLogger(__name__)

def monitor_performance(metric_name: str):
    """æ€§èƒ½ç›‘æ§è£…é¥°å™¨"""
    def decorator(func: Callable) -> Callable:
        @wraps(func)
        def wrapper(*args, **kwargs) -> Any:
            start_time = time.time()
            
            try:
                result = func(*args, **kwargs)
                execution_time = time.time() - start_time
                
                # è®°å½•æ€§èƒ½æŒ‡æ ‡
                logger.info(
                    f"Performance metric: {metric_name} - "
                    f"execution_time={execution_time:.3f}s"
                )
                
                # å¯ä»¥å‘é€åˆ°ç›‘æ§ç³»ç»Ÿ
                # send_to_metrics_system(metric_name, execution_time)
                
                return result
                
            except Exception as e:
                execution_time = time.time() - start_time
                logger.error(
                    f"Performance metric (error): {metric_name} - "
                    f"execution_time={execution_time:.3f}s, error={e}"
                )
                raise
        
        return wrapper
    return decorator

# ä½¿ç”¨ç¤ºä¾‹
@monitor_performance("distance_matrix_calculation")
def calculate_distance_matrix(origins, destinations):
    # è®¡ç®—é€»è¾‘
    pass
```

### å¤‡ä»½ä¸æ¢å¤

#### æ•°æ®å¤‡ä»½è„šæœ¬
```bash
#!/bin/bash
# scripts/backup.sh

set -e

BACKUP_DIR="/backups/mannings-sla"
TIMESTAMP=$(date +"%Y%m%d_%H%M%S")
BACKUP_FILE="$BACKUP_DIR/backup_$TIMESTAMP.tar.gz"

echo "ğŸ“¦ Starting backup..."

# åˆ›å»ºå¤‡ä»½ç›®å½•
mkdir -p $BACKUP_DIR

# å¤‡ä»½æ•°æ®
tar -czf $BACKUP_FILE \
  data/ \
  outputs/ \
  logs/ \
  config/

# ä¿ç•™æœ€è¿‘7å¤©çš„å¤‡ä»½
find $BACKUP_DIR -name "backup_*.tar.gz" -mtime +7 -delete

echo "âœ… Backup completed: $BACKUP_FILE"
```

#### æ•°æ®åº“å¤‡ä»½ï¼ˆå¦‚æœä½¿ç”¨æ•°æ®åº“ï¼‰
```bash
#!/bin/bash
# scripts/backup_database.sh

# PostgreSQLå¤‡ä»½
pg_dump -U $DB_USER -h $DB_HOST $DB_NAME > backup_$(date +%Y%m%d).sql

# SQLiteå¤‡ä»½
sqlite3 data/mannings.db ".backup backup_$(date +%Y%m%d).db"
```

#### æ¢å¤è„šæœ¬
```bash
#!/bin/bash
# scripts/restore.sh

set -e

BACKUP_FILE=$1

if [ -z "$BACKUP_FILE" ]; then
    echo "Usage: $0 <backup_file.tar.gz>"
    exit 1
fi

echo "ğŸ”„ Restoring from backup: $BACKUP_FILE"

# åœæ­¢æœåŠ¡
docker-compose down

# è§£å‹å¤‡ä»½
tar -xzf $BACKUP_FILE -C /

# å¯åŠ¨æœåŠ¡
docker-compose up -d

echo "âœ… Restore completed!"
```

---

## æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

#### 1. æ¨¡å—åŠ è½½å¤±è´¥
**é—®é¢˜**ï¼š`ModuleNotFoundError: No module named 'src'`
```bash
# è§£å†³æ–¹æ¡ˆ1ï¼šæ·»åŠ é¡¹ç›®æ ¹ç›®å½•åˆ°Pythonè·¯å¾„
export PYTHONPATH="${PYTHONPATH}:$(pwd)"

# è§£å†³æ–¹æ¡ˆ2ï¼šä½¿ç”¨ç»å¯¹å¯¼å…¥
# åœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ ï¼š
import sys
from pathlib import Path
sys.path.insert(0, str(Path(__file__).parent.parent.parent))

# è§£å†³æ–¹æ¡ˆ3ï¼šæ£€æŸ¥__init__.pyæ–‡ä»¶
# ç¡®ä¿æ‰€æœ‰ç›®å½•éƒ½æœ‰__init__.pyæ–‡ä»¶
```

**é—®é¢˜**ï¼š`KeyError: Module 'xxx' not found in registry`
```bash
# è§£å†³æ–¹æ¡ˆ1ï¼šæ£€æŸ¥é…ç½®æ–‡ä»¶
cat config/modules.yaml | grep -A5 "xxx:"

# è§£å†³æ–¹æ¡ˆ2ï¼šéªŒè¯æ¨¡å—è·¯å¾„
python -c "import src.modules.data.implementations.simulated_data_fetcher"

# è§£å†³æ–¹æ¡ˆ3ï¼šé‡æ–°æ³¨å†Œæ¨¡å—
python scripts/manage_modules.py list
```

#### 2. ä¾èµ–å®‰è£…å¤±è´¥
**é—®é¢˜**ï¼š`CondaHTTPError: HTTP 000 CONNECTION FAILED`
```bash
# è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨å›½å†…é•œåƒæº
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
conda config --set show_channel_urls yes

# æˆ–è€…ä½¿ç”¨ä»£ç†
export https_proxy=http://your-proxy:port
export http_proxy=http://your-proxy:port
```

**é—®é¢˜**ï¼š`Prophetå®‰è£…å¤±è´¥`
```bash
# è§£å†³æ–¹æ¡ˆï¼šå…ˆå®‰è£…ä¾èµ–
conda install -c conda-forge prophet

# æˆ–è€…ä½¿ç”¨pip
pip install prophet --no-deps
pip install pystan==2.19.1.1
```

#### 3. APIè°ƒç”¨å¤±è´¥
**é—®é¢˜**ï¼š`Google Maps API quota exceeded`
```bash
# è§£å†³æ–¹æ¡ˆ1ï¼šæ£€æŸ¥APIé…é¢
# è®¿é—®Google Cloud ConsoleæŸ¥çœ‹é…é¢ä½¿ç”¨æƒ…å†µ

# è§£å†³æ–¹æ¡ˆ2ï¼šå¯ç”¨ç¼“å­˜å‡å°‘è°ƒç”¨
# åœ¨é…ç½®ä¸­è®¾ç½®cache_enabled: true

# è§£å†³æ–¹æ¡ˆ3ï¼šä½¿ç”¨å¤‡é€‰è·ç¦»è®¡ç®—å™¨
# åˆ‡æ¢åˆ°æ¬§å‡ é‡Œå¾—æˆ–æ›¼å“ˆé¡¿è·ç¦»è®¡ç®—å™¨
```

**é—®é¢˜**ï¼š`HK Observatory API timeout`
```bash
# è§£å†³æ–¹æ¡ˆ1ï¼šå¢åŠ è¶…æ—¶æ—¶é—´
config:
  timeout: 30

# è§£å†³æ–¹æ¡ˆ2ï¼šä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
# åˆ‡æ¢åˆ°SimulatedDataFetcher
```

#### 4. å†…å­˜ä¸è¶³
**é—®é¢˜**ï¼š`MemoryError` æˆ–è¿›ç¨‹è¢«æ€æ­»
```bash
# è§£å†³æ–¹æ¡ˆ1ï¼šå¢åŠ ç³»ç»Ÿå†…å­˜
# å¦‚æœä½¿ç”¨Dockerï¼Œå¢åŠ å†…å­˜é™åˆ¶ï¼š
docker run -m 8g ...

# è§£å†³æ–¹æ¡ˆ2ï¼šä¼˜åŒ–æ•°æ®å¤„ç†
# ä½¿ç”¨åˆ†å—å¤„ç†å¤§æ•°æ®
def process_large_data(file_path, chunk_size=10000):
    for chunk in pd.read_csv(file_path, chunksize=chunk_size):
        process_chunk(chunk)

# è§£å†³æ–¹æ¡ˆ3ï¼šä½¿ç”¨æ›´é«˜æ•ˆçš„æ•°æ®ç±»å‹
df['column'] = df['column'].astype('float32')  # è€Œä¸æ˜¯float64
```

#### 5. æ€§èƒ½é—®é¢˜
**é—®é¢˜**ï¼šè·ç¦»è®¡ç®—å¤ªæ…¢
```bash
# è§£å†³æ–¹æ¡ˆ1ï¼šå¯ç”¨ç¼“å­˜
distance_calculator:
  config:
    cache_enabled: true
    cache_size: 10000

# è§£å†³æ–¹æ¡ˆ2ï¼šå¹¶è¡Œè®¡ç®—
from concurrent.futures import ThreadPoolExecutor

def calculate_distances_parallel(origins, destinations):
    with ThreadPoolExecutor(max_workers=4) as executor:
        results = list(executor.map(calculate_distance, origins, destinations))
    return results

# è§£å†³æ–¹æ¡ˆ3ï¼šä½¿ç”¨æ›´å¿«çš„ç®—æ³•
# è€ƒè™‘ä½¿ç”¨è¿‘ä¼¼ç®—æ³•æˆ–é¢„è®¡ç®—è·ç¦»çŸ©é˜µ
```

### è°ƒè¯•æŠ€å·§

#### 1. æ—¥å¿—çº§åˆ«è°ƒæ•´
```python
# ä¸´æ—¶è°ƒæ•´æ—¥å¿—çº§åˆ«
import logging
logging.getLogger().setLevel(logging.DEBUG)

# æŸ¥çœ‹ç‰¹å®šæ¨¡å—çš„æ—¥å¿—
logging.getLogger('src.modules.distance').setLevel(logging.DEBUG)
```

#### 2. è°ƒè¯•å™¨ä½¿ç”¨
```python
# åœ¨ä»£ç ä¸­æ’å…¥æ–­ç‚¹
import pdb; pdb.set_trace()

# æˆ–ä½¿ç”¨breakpoint()ï¼ˆPython 3.7+ï¼‰
breakpoint()

# VS Codeè°ƒè¯•é…ç½®
# .vscode/launch.json
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Python: Main",
            "type": "python",
            "request": "launch",
            "program": "${workspaceFolder}/src/main.py",
            "console": "integratedTerminal",
            "env": {
                "PYTHONPATH": "${workspaceFolder}"
            }
        }
    ]
}
```

#### 3. æ€§èƒ½åˆ†æ
```python
# ä½¿ç”¨cProfileè¿›è¡Œæ€§èƒ½åˆ†æ
import cProfile
import pstats

profiler = cProfile.Profile()
profiler.enable()

# è¿è¡Œéœ€è¦åˆ†æçš„ä»£ç 
main()

profiler.disable()

# ä¿å­˜åˆ†æç»“æœ
stats = pstats.Stats(profiler)
stats.sort_stats('cumulative')
stats.print_stats(20)  # æ‰“å°å‰20ä¸ªæœ€è€—æ—¶çš„å‡½æ•°

# ä¿å­˜åˆ°æ–‡ä»¶
stats.dump_stats('profile_results.prof')

# ä½¿ç”¨snakevizå¯è§†åŒ–
# pip install snakeviz
# snakeviz profile_results.prof
```

### ç³»ç»Ÿè¯Šæ–­

#### ç³»ç»ŸçŠ¶æ€æ£€æŸ¥
```bash
# è¿è¡Œç³»ç»ŸçŠ¶æ€æ£€æŸ¥è„šæœ¬
python scripts/system_status.py

# æ£€æŸ¥å…³é”®æœåŠ¡
python -c "from src.core.module_registry import ModuleRegistry; \
           r = ModuleRegistry(); \
           print('Modules:', list(r.modules.keys()))"

# æ£€æŸ¥æ•°æ®æ–‡ä»¶
python -c "import pandas as pd; \
           df = pd.read_csv('data/synthetic/stores.csv'); \
           print(f'Stores: {len(df)}')"
```

#### ç¯å¢ƒéªŒè¯
```bash
# éªŒè¯Pythonç¯å¢ƒ
python scripts/verify_environment.py

# æ£€æŸ¥ä¾èµ–ç‰ˆæœ¬
conda list | grep -E "(pandas|numpy|prophet|streamlit)"

# æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h .

# æ£€æŸ¥å†…å­˜ä½¿ç”¨
free -h

# æ£€æŸ¥è¿›ç¨‹
ps aux | grep -E "(python|streamlit)"
```

---

## é™„å½•

### A. å¿«æ·é”®å‚è€ƒ

#### VS Code å¿«æ·é”®
- `Ctrl+Shift+P`ï¼šå‘½ä»¤é¢æ¿
- `Ctrl+P`ï¼šå¿«é€Ÿæ‰“å¼€æ–‡ä»¶
- `Ctrl+Shift+`ï¼šæ‰“å¼€ç»ˆç«¯
- `F5`ï¼šå¼€å§‹è°ƒè¯•
- `F9`ï¼šåˆ‡æ¢æ–­ç‚¹
- `Ctrl+Shift+I`ï¼šæ ¼å¼åŒ–æ–‡æ¡£
- `Ctrl+Shift+L`ï¼šé€‰æ‹©æ‰€æœ‰åŒ¹é…é¡¹

#### ç»ˆç«¯å¿«æ·é”®
- `Ctrl+C`ï¼šä¸­æ–­å½“å‰å‘½ä»¤
- `Ctrl+D`ï¼šé€€å‡ºç»ˆç«¯
- `Ctrl+L`ï¼šæ¸…å±
- `Ctrl+R`ï¼šæœç´¢å†å²å‘½ä»¤
- `Ctrl+A`ï¼šç§»åŠ¨åˆ°è¡Œé¦–
- `Ctrl+E`ï¼šç§»åŠ¨åˆ°è¡Œå°¾
- `Ctrl+U`ï¼šåˆ é™¤åˆ°è¡Œé¦–
- `Ctrl+K`ï¼šåˆ é™¤åˆ°è¡Œå°¾

### B. æœ‰ç”¨çš„å‘½ä»¤

#### Git å‘½ä»¤
```bash
# æŸ¥çœ‹æäº¤å†å²
git log --oneline --graph --all

# æ’¤é”€æœ€åä¸€æ¬¡æäº¤
git reset --soft HEAD~1

# æ¸…ç†æœ¬åœ°åˆ†æ”¯
git branch --merged | grep -v "\*" | xargs -n 1 git branch -d

# æŸ¥æ‰¾åŒ…å«ç‰¹å®šå†…å®¹çš„æäº¤
git log --all --grep="å…³é”®å­—"

# æŸ¥çœ‹æ–‡ä»¶ä¿®æ”¹å†å²
git log -p -- path/to/file
```

#### Docker å‘½ä»¤
```bash
# æ¸…ç†æ— ç”¨é•œåƒ
docker system prune -a

# æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨
docker stats

# è¿›å…¥è¿è¡Œä¸­çš„å®¹å™¨
docker exec -it container_name bash

# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs -f container_name

# å¯¼å‡º/å¯¼å…¥é•œåƒ
docker save -o image.tar image:tag
docker load -i image.tar
```

#### Conda å‘½ä»¤
```bash
# åˆ›å»ºç¯å¢ƒå‰¯æœ¬
conda create --name new_env --clone old_env

# å¯¼å‡ºç¯å¢ƒé…ç½®
conda env export > environment.yml

# ä»YAMLæ–‡ä»¶åˆ›å»ºç¯å¢ƒ
conda env create -f environment.yml

# æ›´æ–°ç¯å¢ƒ
conda env update -f environment.yml --prune

# æ¸…ç†åŒ…ç¼“å­˜
conda clean --all
```

### C. æ€§èƒ½ä¼˜åŒ–æŠ€å·§

#### 1. å‘é‡åŒ–æ“ä½œ
```python
# ä¸å¥½ï¼šä½¿ç”¨å¾ªç¯
result = []
for x in data:
    result.append(x * 2)

# å¥½ï¼šä½¿ç”¨å‘é‡åŒ–
result = data * 2

# æ›´å¥½ï¼šä½¿ç”¨NumPy
import numpy as np
result = np.array(data) * 2
```

#### 2. é¿å…é‡å¤è®¡ç®—
```python
# ä¸å¥½ï¼šé‡å¤è®¡ç®—
for i in range(len(data)):
    result1 = expensive_function(data[i])
    result2 = expensive_function(data[i])  # é‡å¤è®¡ç®—ï¼

# å¥½ï¼šç¼“å­˜ç»“æœ
cache = {}
for i in range(len(data)):
    if i not in cache:
        cache[i] = expensive_function(data[i])
    result = cache[i]
```

#### 3. ä½¿ç”¨ç”Ÿæˆå™¨å¤„ç†å¤§æ•°æ®
```python
# ä¸å¥½ï¼šä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰æ•°æ®
with open('large_file.csv') as f:
    data = f.readlines()  # å¯èƒ½å†…å­˜ä¸è¶³
    process(data)

# å¥½ï¼šä½¿ç”¨ç”Ÿæˆå™¨é€è¡Œå¤„ç†
def read_large_file(file_path):
    with open(file_path) as f:
        for line in f:
            yield line

for line in read_large_file('large_file.csv'):
    process_line(line)
```

### D. å­¦ä¹ èµ„æº

#### Python ç›¸å…³
- [Pythonå®˜æ–¹æ–‡æ¡£](https://docs.python.org/3/)
- [Real Pythonæ•™ç¨‹](https://realpython.com/)
- [Python Design Patterns](https://refactoring.guru/design-patterns/python)

#### æ•°æ®ç§‘å­¦
- [Pandasæ–‡æ¡£](https://pandas.pydata.org/docs/)
- [NumPyæ–‡æ¡£](https://numpy.org/doc/)
- [Scikit-learnæ•™ç¨‹](https://scikit-learn.org/stable/tutorial/index.html)

#### æœºå™¨å­¦ä¹ 
- [Prophetæ–‡æ¡£](https://facebook.github.io/prophet/docs/quick_start.html)
- [XGBoostæ–‡æ¡£](https://xgboost.readthedocs.io/)
- [TensorFlowæ•™ç¨‹](https://www.tensorflow.org/tutorials)

#### ä¼˜åŒ–ç®—æ³•
- [OR-Toolsæ–‡æ¡£](https://developers.google.com/optimization)
- [PuLPæ–‡æ¡£](https://coin-or.github.io/pulp/)
- [è½¦è¾†è·¯å¾„é—®é¢˜æ•™ç¨‹](https://developers.google.com/optimization/routing/vrp)

#### å¯è§†åŒ–
- [Streamlitæ–‡æ¡£](https://docs.streamlit.io/)
- [Plotlyæ–‡æ¡£](https://plotly.com/python/)
- [Foliumæ–‡æ¡£](https://python-visualization.github.io/folium/)

#### æœ€ä½³å®è·µ
- [Google Pythoné£æ ¼æŒ‡å—](https://google.github.io/styleguide/pyguide.html)
- [Pythonä»£ç è´¨é‡å·¥å…·](https://realpython.com/python-code-quality/)
- [Pythonæµ‹è¯•æŒ‡å—](https://realpython.com/python-testing/)

---

## æ›´æ–°æ—¥å¿—

### v0.1.0 (2024-01-25)
- âœ… åˆå§‹æ¨¡å—åŒ–æ¶æ„å®ç°
- âœ… æ ¸å¿ƒæ¡†æ¶ï¼ˆæ¥å£ã€æ³¨å†Œè¡¨ã€åè°ƒå™¨ï¼‰
- âœ… åŸºç¡€æ¨¡å—å®ç°ï¼ˆæ•°æ®ã€è·ç¦»ã€é¢„æµ‹ã€è·¯ç”±ã€SLAã€å¯è§†åŒ–ï¼‰
- âœ… å®Œæ•´çš„å¼€å‘ç¯å¢ƒå’Œå·¥å…·é“¾
- âœ… è¯¦ç»†çš„æ–‡æ¡£å’Œå¼€å‘æŒ‡å—

### è®¡åˆ’åŠŸèƒ½
- [ ] å®æ—¶æ•°æ®æµå¤„ç†
- [ ] é«˜çº§æœºå™¨å­¦ä¹ æ¨¡å‹é›†æˆ
- [ ] å¤šç›®æ ‡ä¼˜åŒ–ç®—æ³•
- [ ] ç§»åŠ¨ç«¯åº”ç”¨
- [ ] é¢„æµ‹æ¨¡å‹è‡ªåŠ¨è°ƒä¼˜
- [ ] A/Bæµ‹è¯•æ¡†æ¶

---

## è”ç³»æˆ‘ä»¬

### é¡¹ç›®å›¢é˜Ÿ
- **é¡¹ç›®ç»ç†**ï¼šè´Ÿè´£æ•´ä½“åè°ƒå’Œè¿›åº¦ç®¡ç†
- **ç³»ç»Ÿæ¶æ„å¸ˆ**ï¼šè´Ÿè´£ç³»ç»Ÿè®¾è®¡å’ŒæŠ€æœ¯å†³ç­–
- **æ•°æ®å·¥ç¨‹å¸ˆ**ï¼šè´Ÿè´£æ•°æ®è·å–å’Œå¤„ç†
- **ç®—æ³•å·¥ç¨‹å¸ˆ**ï¼šè´Ÿè´£é¢„æµ‹å’Œä¼˜åŒ–ç®—æ³•
- **å‰ç«¯å·¥ç¨‹å¸ˆ**ï¼šè´Ÿè´£å¯è§†åŒ–ç•Œé¢
- **æµ‹è¯•å·¥ç¨‹å¸ˆ**ï¼šè´Ÿè´£è´¨é‡ä¿è¯

### æ”¯æŒæ¸ é“
- **GitHub Issues**ï¼šæŠ€æœ¯é—®é¢˜å’ŒåŠŸèƒ½è¯·æ±‚
- **å›¢é˜Ÿå¾®ä¿¡ç¾¤**ï¼šæ—¥å¸¸æ²Ÿé€šå’Œåè°ƒ
- **æ¯å‘¨ä¼šè®®**ï¼šè¿›åº¦åŒæ­¥å’Œé—®é¢˜è§£å†³
- **æ–‡æ¡£**ï¼šè¯¦ç»†çš„æŠ€æœ¯æ–‡æ¡£å’ŒæŒ‡å—

### ç´§æ€¥è”ç³»æ–¹å¼
- æŠ€æœ¯é—®é¢˜ï¼š@æŠ€æœ¯è´Ÿè´£äºº
- éƒ¨ç½²é—®é¢˜ï¼š@è¿ç»´è´Ÿè´£äºº
- æ•°æ®é—®é¢˜ï¼š@æ•°æ®è´Ÿè´£äºº

---

**æœ€åæ›´æ–°**ï¼š2024å¹´1æœˆ25æ—¥  
**ç‰ˆæœ¬**ï¼šv1.0.0  
**çŠ¶æ€**ï¼šå¼€å‘ä¸­  

> æ³¨æ„ï¼šæœ¬å¼€å‘æŒ‡å—ä¼šæ ¹æ®é¡¹ç›®è¿›å±•æŒç»­æ›´æ–°ã€‚è¯·å®šæœŸæŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬ã€‚